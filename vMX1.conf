	**************************************
			   	BASE CONFIG

	**************************************




	******** ACLs *********

	set logical-systems PE1 firewall family inet filter protect-RE-private term first-frag from first-fragment
	set logical-systems PE1 firewall family inet filter protect-RE-private term first-frag then discard
	set logical-systems PE1 firewall family inet filter protect-RE-private term next-frag from is-fragment
	set logical-systems PE1 firewall family inet filter protect-RE-private term next-frag then discard
	set logical-systems PE1 firewall family inet filter protect-RE-private term ssh-in from source-prefix-list inet:ssh-prefix
	set logical-systems PE1 firewall family inet filter protect-RE-private term ssh-in from protocol tcp
	set logical-systems PE1 firewall family inet filter protect-RE-private term ssh-in from port ssh
	set logical-systems PE1 firewall family inet filter protect-RE-private term ssh-in then accept
	set logical-systems PE1 firewall family inet filter protect-RE-private term snmp-limit from source-prefix-list inet:snmp-prefix
	set logical-systems PE1 firewall family inet filter protect-RE-private term snmp-limit from protocol udp
	set logical-systems PE1 firewall family inet filter protect-RE-private term snmp-limit from port snmp
	set logical-systems PE1 firewall family inet filter protect-RE-private term snmp-limit then accept
	set logical-systems PE1 firewall family inet filter protect-RE-private term bgp-in from source-prefix-list inet:bgp-prefix
	set logical-systems PE1 firewall family inet filter protect-RE-private term bgp-in from protocol tcp
	set logical-systems PE1 firewall family inet filter protect-RE-private term bgp-in from port bgp
	set logical-systems PE1 firewall family inet filter protect-RE-private term bgp-in then accept
	set logical-systems PE1 firewall family inet filter protect-RE-private term traceroute-in from source-prefix-list inet:internal-prefix
	set logical-systems PE1 firewall family inet filter protect-RE-private term traceroute-in from protocol udp
	set logical-systems PE1 firewall family inet filter protect-RE-private term traceroute-in from destination-port 33434-33523
	set logical-systems PE1 firewall family inet filter protect-RE-private term traceroute-in then policer 10m-policer
	set logical-systems PE1 firewall family inet filter protect-RE-private term traceroute-in then accept
	set logical-systems PE1 firewall family inet filter protect-RE-private term bfd-in from source-prefix-list inet:bgp-prefix
	set logical-systems PE1 firewall family inet filter protect-RE-private term bfd-in from protocol udp
	set logical-systems PE1 firewall family inet filter protect-RE-private term bfd-in from destination-port 3784
	set logical-systems PE1 firewall family inet filter protect-RE-private term bfd-in then accept
	set logical-systems PE1 firewall family inet filter protect-RE-private term icmp-limit from source-prefix-list inet:internal-prefix
	set logical-systems PE1 firewall family inet filter protect-RE-private term icmp-limit from protocol icmp
	set logical-systems PE1 firewall family inet filter protect-RE-private term icmp-limit then policer 10m-policer
	set logical-systems PE1 firewall family inet filter protect-RE-private term icmp-limit then accept
	set logical-systems PE1 firewall family inet filter protect-RE-private term ntp-in from source-prefix-list inet:ntp-server
	set logical-systems PE1 firewall family inet filter protect-RE-private term ntp-in from protocol udp
	set logical-systems PE1 firewall family inet filter protect-RE-private term ntp-in from port ntp
	set logical-systems PE1 firewall family inet filter protect-RE-private term ntp-in then accept
	set logical-systems PE1 firewall family inet filter protect-RE-private term tacacs-reply from source-prefix-list inet:tacacs-servers
	set logical-systems PE1 firewall family inet filter protect-RE-private term tacacs-reply from protocol tcp
	set logical-systems PE1 firewall family inet filter protect-RE-private term tacacs-reply from source-port 49
	set logical-systems PE1 firewall family inet filter protect-RE-private term tacacs-reply then accept
	set logical-systems PE1 firewall family inet filter protect-RE-private term dns-reply from source-prefix-list inet:dns-servers
	set logical-systems PE1 firewall family inet filter protect-RE-private term dns-reply from protocol udp
	set logical-systems PE1 firewall family inet filter protect-RE-private term dns-reply from source-port domain
	set logical-systems PE1 firewall family inet filter protect-RE-private term dns-reply then accept
	set logical-systems PE1 firewall family inet filter protect-RE-private term discard-last then discard

	set logical-systems PE1 firewall family inet filter protect-RE-vpn term first-frag from first-fragment
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term first-frag then discard
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term next-frag from is-fragment
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term next-frag then discard
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term traceroute-limit from protocol udp
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term traceroute-limit from destination-port 33434-33523
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term traceroute-limit then policer 10m-policer
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term traceroute-limit then count traceroute-traffic
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term traceroute-limit then accept
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term icmp-limit from protocol icmp
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type echo-request
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type echo-reply
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type unreachable
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type time-exceeded
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term icmp-limit then count icmp-traffic
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term icmp-limit then policer 10m-policer
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term icmp-limit then accept
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term bgp-limit from source-prefix-list RI:bgp-prefix
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term bgp-limit from protocol tcp
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term bgp-limit from port bgp
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term bgp-limit then accept
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term bfd-in from source-prefix-list RI:bgp-prefix
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term bfd-in from protocol udp
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term bfd-in from destination-port 3784
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term bfd-in from destination-port 3785
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term bfd-in then accept
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term discard-last then count discard-traffic
	set logical-systems PE1 firewall family inet filter protect-RE-vpn term discard-last then discard

	set logical-systems PE1 firewall policer 10m-policer if-exceeding bandwidth-limit 10m
	set logical-systems PE1 firewall policer 10m-policer if-exceeding burst-size-limit 256k
	set logical-systems PE1 firewall policer 10m-policer then discard


	delete groups re-fw logical-systems PE1 interfaces lo0 unit <*> family inet filter input protect-RE-private
	delete logical-systems PE1 apply-groups re-fw
	delete groups vpn-fw logical-systems PE1 interfaces lo0 unit <*> family inet filter input protect-RE-vpn
	delete logical-systems PE1 apply-groups vpn-fw

	set logical-systems PE1 policy-options prefix-list inet:snmp-prefix 176.67.173.172/32
	set logical-systems PE1 policy-options prefix-list inet:snmp-prefix 69.36.160.0/24
	set logical-systems PE1 policy-options prefix-list inet:snmp-prefix 77.92.94.112/28
	set logical-systems PE1 policy-options prefix-list inet:snmp-prefix 209.50.158.0/23

	set logical-systems PE1 policy-options prefix-list inet:ssh-prefix 77.92.94.112/28
	set logical-systems PE1 policy-options prefix-list inet:ssh-prefix 83.170.64.10/32
	set logical-systems PE1 policy-options prefix-list inet:ssh-prefix 69.36.160.0/24

	set logical-systems PE1 policy-options prefix-list inet:internal-prefix 176.67.173.172/32
	set logical-systems PE1 policy-options prefix-list inet:internal-prefix 69.36.160.0/24
	set logical-systems PE1 policy-options prefix-list inet:internal-prefix 77.92.94.112/28
	set logical-systems PE1 policy-options prefix-list inet:internal-prefix 209.50.158.0/23

	set logical-systems PE1 policy-options prefix-list inet:bgp-prefix apply-path "logical-systems PE1 protocols bgp group <*> neighbor <*>"

	set logical-systems PE1 policy-options prefix-list inet:radius-servers apply-path "system radius-server <*>"

	set logical-systems PE1 policy-options prefix-list inet:tacacs-servers apply-path "system tacplus-server <*>"

	set logical-systems PE1 policy-options prefix-list inet:ntp-server apply-path "system ntp server <*>"

	set logical-systems PE1 policy-options prefix-list inet:dns-servers apply-path "system name-server <*>"

	set logical-systems PE1 policy-options prefix-list RI:bgp-prefix apply-path "logical-systems PE1 protocols bgp group <*> neighbor <*>"






	To check the apply paths are working issue the command show policy options prefix-list inet:ntp-server | display inheritance







	-------------------------------------------




	set logical-systems PE2 firewall family inet filter protect-RE-private term first-frag from first-fragment
	set logical-systems PE2 firewall family inet filter protect-RE-private term first-frag then discard
	set logical-systems PE2 firewall family inet filter protect-RE-private term next-frag from is-fragment
	set logical-systems PE2 firewall family inet filter protect-RE-private term next-frag then discard
	set logical-systems PE2 firewall family inet filter protect-RE-private term ssh-in from source-prefix-list inet:ssh-prefix
	set logical-systems PE2 firewall family inet filter protect-RE-private term ssh-in from protocol tcp
	set logical-systems PE2 firewall family inet filter protect-RE-private term ssh-in from port ssh
	set logical-systems PE2 firewall family inet filter protect-RE-private term ssh-in then accept
	set logical-systems PE2 firewall family inet filter protect-RE-private term snmp-limit from source-prefix-list inet:snmp-prefix
	set logical-systems PE2 firewall family inet filter protect-RE-private term snmp-limit from protocol udp
	set logical-systems PE2 firewall family inet filter protect-RE-private term snmp-limit from port snmp
	set logical-systems PE2 firewall family inet filter protect-RE-private term snmp-limit then accept
	set logical-systems PE2 firewall family inet filter protect-RE-private term bgp-in from source-prefix-list inet:bgp-prefix
	set logical-systems PE2 firewall family inet filter protect-RE-private term bgp-in from protocol tcp
	set logical-systems PE2 firewall family inet filter protect-RE-private term bgp-in from port bgp
	set logical-systems PE2 firewall family inet filter protect-RE-private term bgp-in then accept
	set logical-systems PE2 firewall family inet filter protect-RE-private term traceroute-in from source-prefix-list inet:internal-prefix
	set logical-systems PE2 firewall family inet filter protect-RE-private term traceroute-in from protocol udp
	set logical-systems PE2 firewall family inet filter protect-RE-private term traceroute-in from destination-port 33434-33523
	set logical-systems PE2 firewall family inet filter protect-RE-private term traceroute-in then policer 10m-policer
	set logical-systems PE2 firewall family inet filter protect-RE-private term traceroute-in then accept
	set logical-systems PE2 firewall family inet filter protect-RE-private term bfd-in from source-prefix-list inet:bgp-prefix
	set logical-systems PE2 firewall family inet filter protect-RE-private term bfd-in from protocol udp
	set logical-systems PE2 firewall family inet filter protect-RE-private term bfd-in from destination-port 3784
	set logical-systems PE2 firewall family inet filter protect-RE-private term bfd-in then accept
	set logical-systems PE2 firewall family inet filter protect-RE-private term icmp-limit from source-prefix-list inet:internal-prefix
	set logical-systems PE2 firewall family inet filter protect-RE-private term icmp-limit from protocol icmp
	set logical-systems PE2 firewall family inet filter protect-RE-private term icmp-limit then policer 10m-policer
	set logical-systems PE2 firewall family inet filter protect-RE-private term icmp-limit then accept
	set logical-systems PE2 firewall family inet filter protect-RE-private term ntp-in from source-prefix-list inet:ntp-server
	set logical-systems PE2 firewall family inet filter protect-RE-private term ntp-in from protocol udp
	set logical-systems PE2 firewall family inet filter protect-RE-private term ntp-in from port ntp
	set logical-systems PE2 firewall family inet filter protect-RE-private term ntp-in then accept
	set logical-systems PE2 firewall family inet filter protect-RE-private term tacacs-reply from source-prefix-list inet:tacacs-servers
	set logical-systems PE2 firewall family inet filter protect-RE-private term tacacs-reply from protocol tcp
	set logical-systems PE2 firewall family inet filter protect-RE-private term tacacs-reply from source-port 49
	set logical-systems PE2 firewall family inet filter protect-RE-private term tacacs-reply then accept
	set logical-systems PE2 firewall family inet filter protect-RE-private term dns-reply from source-prefix-list inet:dns-servers
	set logical-systems PE2 firewall family inet filter protect-RE-private term dns-reply from protocol udp
	set logical-systems PE2 firewall family inet filter protect-RE-private term dns-reply from source-port domain
	set logical-systems PE2 firewall family inet filter protect-RE-private term dns-reply then accept
	set logical-systems PE2 firewall family inet filter protect-RE-private term discard-last then discard

	set logical-systems PE2 firewall family inet filter protect-RE-vpn term first-frag from first-fragment
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term first-frag then discard
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term next-frag from is-fragment
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term next-frag then discard
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term traceroute-limit from protocol udp
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term traceroute-limit from destination-port 33434-33523
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term traceroute-limit then policer 10m-policer
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term traceroute-limit then count traceroute-traffic
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term traceroute-limit then accept
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term icmp-limit from protocol icmp
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type echo-request
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type echo-reply
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type unreachable
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type time-exceeded
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term icmp-limit then count icmp-traffic
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term icmp-limit then policer 10m-policer
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term icmp-limit then accept
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term bgp-limit from source-prefix-list RI:bgp-prefix
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term bgp-limit from protocol tcp
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term bgp-limit from port bgp
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term bgp-limit then accept
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term bfd-in from source-prefix-list RI:bgp-prefix
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term bfd-in from protocol udp
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term bfd-in from destination-port 3784
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term bfd-in from destination-port 3785
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term bfd-in then accept
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term discard-last then count discard-traffic
	set logical-systems PE2 firewall family inet filter protect-RE-vpn term discard-last then discard

	set logical-systems PE2 firewall policer 10m-policer if-exceeding bandwidth-limit 10m
	set logical-systems PE2 firewall policer 10m-policer if-exceeding burst-size-limit 256k
	set logical-systems PE2 firewall policer 10m-policer then discard

	delete groups re-fw logical-systems PE2 interfaces lo0 unit <*> family inet filter input protect-RE-private
	delete logical-systems PE2 apply-groups re-fw
	delete groups vpn-fw logical-systems PE2 interfaces lo0 unit <*> family inet filter input protect-RE-vpn
	delete logical-systems PE2 apply-groups vpn-fw

	set logical-systems PE2 policy-options prefix-list inet:snmp-prefix 176.67.173.172/32
	set logical-systems PE2 policy-options prefix-list inet:snmp-prefix 69.36.160.0/24
	set logical-systems PE2 policy-options prefix-list inet:snmp-prefix 77.92.94.112/28
	set logical-systems PE2 policy-options prefix-list inet:snmp-prefix 209.50.158.0/23

	set logical-systems PE2 policy-options prefix-list inet:ssh-prefix 77.92.94.112/28
	set logical-systems PE2 policy-options prefix-list inet:ssh-prefix 83.170.64.10/32
	set logical-systems PE2 policy-options prefix-list inet:ssh-prefix 69.36.160.0/24

	set logical-systems PE2 policy-options prefix-list inet:internal-prefix 176.67.173.172/32
	set logical-systems PE2 policy-options prefix-list inet:internal-prefix 69.36.160.0/24
	set logical-systems PE2 policy-options prefix-list inet:internal-prefix 77.92.94.112/28
	set logical-systems PE2 policy-options prefix-list inet:internal-prefix 209.50.158.0/23

	set logical-systems PE2 policy-options prefix-list inet:bgp-prefix apply-path "logical-systems PE2 protocols bgp group <*> neighbor <*>"

	set logical-systems PE2 policy-options prefix-list inet:radius-servers apply-path "system radius-server <*>"

	set logical-systems PE2 policy-options prefix-list inet:tacacs-servers apply-path "system tacplus-server <*>"

	set logical-systems PE2 policy-options prefix-list inet:ntp-server apply-path "system ntp server <*>"

	set logical-systems PE2 policy-options prefix-list inet:dns-servers apply-path "system name-server <*>"

	set logical-systems PE2 policy-options prefix-list RI:bgp-prefix apply-path "logical-systems PE2 protocols bgp group <*> neighbor <*>"






	To check the apply paths are working issue the command show policy options prefix-list inet:ntp-server | display inheritance





	------------------------

	set logical-systems PE3 firewall family inet filter protect-RE-private term first-frag from first-fragment
	set logical-systems PE3 firewall family inet filter protect-RE-private term first-frag then discard
	set logical-systems PE3 firewall family inet filter protect-RE-private term next-frag from is-fragment
	set logical-systems PE3 firewall family inet filter protect-RE-private term next-frag then discard
	set logical-systems PE3 firewall family inet filter protect-RE-private term ssh-in from source-prefix-list inet:ssh-prefix
	set logical-systems PE3 firewall family inet filter protect-RE-private term ssh-in from protocol tcp
	set logical-systems PE3 firewall family inet filter protect-RE-private term ssh-in from port ssh
	set logical-systems PE3 firewall family inet filter protect-RE-private term ssh-in then accept
	set logical-systems PE3 firewall family inet filter protect-RE-private term snmp-limit from source-prefix-list inet:snmp-prefix
	set logical-systems PE3 firewall family inet filter protect-RE-private term snmp-limit from protocol udp
	set logical-systems PE3 firewall family inet filter protect-RE-private term snmp-limit from port snmp
	set logical-systems PE3 firewall family inet filter protect-RE-private term snmp-limit then accept
	set logical-systems PE3 firewall family inet filter protect-RE-private term bgp-in from source-prefix-list inet:bgp-prefix
	set logical-systems PE3 firewall family inet filter protect-RE-private term bgp-in from protocol tcp
	set logical-systems PE3 firewall family inet filter protect-RE-private term bgp-in from port bgp
	set logical-systems PE3 firewall family inet filter protect-RE-private term bgp-in then accept
	set logical-systems PE3 firewall family inet filter protect-RE-private term traceroute-in from source-prefix-list inet:internal-prefix
	set logical-systems PE3 firewall family inet filter protect-RE-private term traceroute-in from protocol udp
	set logical-systems PE3 firewall family inet filter protect-RE-private term traceroute-in from destination-port 33434-33523
	set logical-systems PE3 firewall family inet filter protect-RE-private term traceroute-in then policer 10m-policer
	set logical-systems PE3 firewall family inet filter protect-RE-private term traceroute-in then accept
	set logical-systems PE3 firewall family inet filter protect-RE-private term bfd-in from source-prefix-list inet:bgp-prefix
	set logical-systems PE3 firewall family inet filter protect-RE-private term bfd-in from protocol udp
	set logical-systems PE3 firewall family inet filter protect-RE-private term bfd-in from destination-port 3784
	set logical-systems PE3 firewall family inet filter protect-RE-private term bfd-in then accept
	set logical-systems PE3 firewall family inet filter protect-RE-private term icmp-limit from source-prefix-list inet:internal-prefix
	set logical-systems PE3 firewall family inet filter protect-RE-private term icmp-limit from protocol icmp
	set logical-systems PE3 firewall family inet filter protect-RE-private term icmp-limit then policer 10m-policer
	set logical-systems PE3 firewall family inet filter protect-RE-private term icmp-limit then accept
	set logical-systems PE3 firewall family inet filter protect-RE-private term ntp-in from source-prefix-list inet:ntp-server
	set logical-systems PE3 firewall family inet filter protect-RE-private term ntp-in from protocol udp
	set logical-systems PE3 firewall family inet filter protect-RE-private term ntp-in from port ntp
	set logical-systems PE3 firewall family inet filter protect-RE-private term ntp-in then accept
	set logical-systems PE3 firewall family inet filter protect-RE-private term tacacs-reply from source-prefix-list inet:tacacs-servers
	set logical-systems PE3 firewall family inet filter protect-RE-private term tacacs-reply from protocol tcp
	set logical-systems PE3 firewall family inet filter protect-RE-private term tacacs-reply from source-port 49
	set logical-systems PE3 firewall family inet filter protect-RE-private term tacacs-reply then accept
	set logical-systems PE3 firewall family inet filter protect-RE-private term dns-reply from source-prefix-list inet:dns-servers
	set logical-systems PE3 firewall family inet filter protect-RE-private term dns-reply from protocol udp
	set logical-systems PE3 firewall family inet filter protect-RE-private term dns-reply from source-port domain
	set logical-systems PE3 firewall family inet filter protect-RE-private term dns-reply then accept
	set logical-systems PE3 firewall family inet filter protect-RE-private term discard-last then discard

	set logical-systems PE3 firewall family inet filter protect-RE-vpn term first-frag from first-fragment
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term first-frag then discard
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term next-frag from is-fragment
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term next-frag then discard
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term traceroute-limit from protocol udp
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term traceroute-limit from destination-port 33434-33523
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term traceroute-limit then policer 10m-policer
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term traceroute-limit then count traceroute-traffic
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term traceroute-limit then accept
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term icmp-limit from protocol icmp
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type echo-request
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type echo-reply
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type unreachable
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type time-exceeded
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term icmp-limit then count icmp-traffic
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term icmp-limit then policer 10m-policer
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term icmp-limit then accept
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term bgp-limit from source-prefix-list RI:bgp-prefix
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term bgp-limit from protocol tcp
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term bgp-limit from port bgp
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term bgp-limit then accept
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term bfd-in from source-prefix-list RI:bgp-prefix
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term bfd-in from protocol udp
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term bfd-in from destination-port 3784
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term bfd-in from destination-port 3785
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term bfd-in then accept
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term discard-last then count discard-traffic
	set logical-systems PE3 firewall family inet filter protect-RE-vpn term discard-last then discard

	set logical-systems PE3 firewall policer 10m-policer if-exceeding bandwidth-limit 10m
	set logical-systems PE3 firewall policer 10m-policer if-exceeding burst-size-limit 256k
	set logical-systems PE3 firewall policer 10m-policer then discard

	delete groups re-fw logical-systems PE3 interfaces lo0 unit <*> family inet filter input protect-RE-private
	delete logical-systems PE3 apply-groups re-fw
	delete logical-systems PE3 groups vpn-fw interfaces lo0 unit <*> family inet filter input protect-RE-vpn
	delete logical-systems PE3 apply-groups vpn-fw

	set logical-systems PE3 policy-options prefix-list inet:snmp-prefix 176.67.173.172/32
	set logical-systems PE3 policy-options prefix-list inet:snmp-prefix 69.36.160.0/24
	set logical-systems PE3 policy-options prefix-list inet:snmp-prefix 77.92.94.112/28
	set logical-systems PE3 policy-options prefix-list inet:snmp-prefix 209.50.158.0/23

	set logical-systems PE3 policy-options prefix-list inet:ssh-prefix 77.92.94.112/28
	set logical-systems PE3 policy-options prefix-list inet:ssh-prefix 83.170.64.10/32
	set logical-systems PE3 policy-options prefix-list inet:ssh-prefix 69.36.160.0/24

	set logical-systems PE3 policy-options prefix-list inet:internal-prefix 176.67.173.172/32
	set logical-systems PE3 policy-options prefix-list inet:internal-prefix 69.36.160.0/24
	set logical-systems PE3 policy-options prefix-list inet:internal-prefix 77.92.94.112/28
	set logical-systems PE3 policy-options prefix-list inet:internal-prefix 209.50.158.0/23

	set logical-systems PE3 policy-options prefix-list inet:bgp-prefix apply-path "logical-systems PE3 protocols bgp group <*> neighbor <*>"

	set logical-systems PE3 policy-options prefix-list inet:radius-servers apply-path "system radius-server <*>"

	set logical-systems PE3 policy-options prefix-list inet:tacacs-servers apply-path "system tacplus-server <*>"

	set logical-systems PE3 policy-options prefix-list inet:ntp-server apply-path "system ntp server <*>"

	set logical-systems PE3 policy-options prefix-list inet:dns-servers apply-path "system name-server <*>"

	set logical-systems PE3 policy-options prefix-list RI:bgp-prefix apply-path "logical-systems PE3 protocols bgp group <*> neighbor <*>"





	To check the apply paths are working issue the command show policy options prefix-list inet:ntp-server | display inheritance




	---------------------------------




	set logical-systems PE4 firewall family inet filter protect-RE-private term first-frag from first-fragment
	set logical-systems PE4 firewall family inet filter protect-RE-private term first-frag then discard
	set logical-systems PE4 firewall family inet filter protect-RE-private term next-frag from is-fragment
	set logical-systems PE4 firewall family inet filter protect-RE-private term next-frag then discard
	set logical-systems PE4 firewall family inet filter protect-RE-private term ssh-in from source-prefix-list inet:ssh-prefix
	set logical-systems PE4 firewall family inet filter protect-RE-private term ssh-in from protocol tcp
	set logical-systems PE4 firewall family inet filter protect-RE-private term ssh-in from port ssh
	set logical-systems PE4 firewall family inet filter protect-RE-private term ssh-in then accept
	set logical-systems PE4 firewall family inet filter protect-RE-private term snmp-limit from source-prefix-list inet:snmp-prefix
	set logical-systems PE4 firewall family inet filter protect-RE-private term snmp-limit from protocol udp
	set logical-systems PE4 firewall family inet filter protect-RE-private term snmp-limit from port snmp
	set logical-systems PE4 firewall family inet filter protect-RE-private term snmp-limit then accept
	set logical-systems PE4 firewall family inet filter protect-RE-private term bgp-in from source-prefix-list inet:bgp-prefix
	set logical-systems PE4 firewall family inet filter protect-RE-private term bgp-in from protocol tcp
	set logical-systems PE4 firewall family inet filter protect-RE-private term bgp-in from port bgp
	set logical-systems PE4 firewall family inet filter protect-RE-private term bgp-in then accept
	set logical-systems PE4 firewall family inet filter protect-RE-private term traceroute-in from source-prefix-list inet:internal-prefix
	set logical-systems PE4 firewall family inet filter protect-RE-private term traceroute-in from protocol udp
	set logical-systems PE4 firewall family inet filter protect-RE-private term traceroute-in from destination-port 33434-33523
	set logical-systems PE4 firewall family inet filter protect-RE-private term traceroute-in then policer 10m-policer
	set logical-systems PE4 firewall family inet filter protect-RE-private term traceroute-in then accept
	set logical-systems PE4 firewall family inet filter protect-RE-private term bfd-in from source-prefix-list inet:bgp-prefix
	set logical-systems PE4 firewall family inet filter protect-RE-private term bfd-in from protocol udp
	set logical-systems PE4 firewall family inet filter protect-RE-private term bfd-in from destination-port 3784
	set logical-systems PE4 firewall family inet filter protect-RE-private term bfd-in then accept
	set logical-systems PE4 firewall family inet filter protect-RE-private term icmp-limit from source-prefix-list inet:internal-prefix
	set logical-systems PE4 firewall family inet filter protect-RE-private term icmp-limit from protocol icmp
	set logical-systems PE4 firewall family inet filter protect-RE-private term icmp-limit then policer 10m-policer
	set logical-systems PE4 firewall family inet filter protect-RE-private term icmp-limit then accept
	set logical-systems PE4 firewall family inet filter protect-RE-private term ntp-in from source-prefix-list inet:ntp-server
	set logical-systems PE4 firewall family inet filter protect-RE-private term ntp-in from protocol udp
	set logical-systems PE4 firewall family inet filter protect-RE-private term ntp-in from port ntp
	set logical-systems PE4 firewall family inet filter protect-RE-private term ntp-in then accept
	set logical-systems PE4 firewall family inet filter protect-RE-private term tacacs-reply from source-prefix-list inet:tacacs-servers
	set logical-systems PE4 firewall family inet filter protect-RE-private term tacacs-reply from protocol tcp
	set logical-systems PE4 firewall family inet filter protect-RE-private term tacacs-reply from source-port 49
	set logical-systems PE4 firewall family inet filter protect-RE-private term tacacs-reply then accept
	set logical-systems PE4 firewall family inet filter protect-RE-private term dns-reply from source-prefix-list inet:dns-servers
	set logical-systems PE4 firewall family inet filter protect-RE-private term dns-reply from protocol udp
	set logical-systems PE4 firewall family inet filter protect-RE-private term dns-reply from source-port domain
	set logical-systems PE4 firewall family inet filter protect-RE-private term dns-reply then accept
	set logical-systems PE4 firewall family inet filter protect-RE-private term discard-last then discard

	set logical-systems PE4 firewall family inet filter protect-RE-vpn term first-frag from first-fragment
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term first-frag then discard
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term next-frag from is-fragment
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term next-frag then discard
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term traceroute-limit from protocol udp
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term traceroute-limit from destination-port 33434-33523
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term traceroute-limit then policer 10m-policer
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term traceroute-limit then count traceroute-traffic
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term traceroute-limit then accept
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term icmp-limit from protocol icmp
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type echo-request
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type echo-reply
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type unreachable
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type time-exceeded
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term icmp-limit then count icmp-traffic
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term icmp-limit then policer 10m-policer
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term icmp-limit then accept
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term bgp-limit from source-prefix-list RI:bgp-prefix
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term bgp-limit from protocol tcp
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term bgp-limit from port bgp
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term bgp-limit then accept
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term bfd-in from source-prefix-list RI:bgp-prefix
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term bfd-in from protocol udp
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term bfd-in from destination-port 3784
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term bfd-in from destination-port 3785
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term bfd-in then accept
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term discard-last then count discard-traffic
	set logical-systems PE4 firewall family inet filter protect-RE-vpn term discard-last then discard

	set logical-systems PE4 firewall policer 10m-policer if-exceeding bandwidth-limit 10m
	set logical-systems PE4 firewall policer 10m-policer if-exceeding burst-size-limit 256k
	set logical-systems PE4 firewall policer 10m-policer then discard

	delete groups re-fw logical-systems PE4 interfaces lo0 unit <*> family inet filter input protect-RE-private
	delete logical-systems PE4 apply-groups re-fw
	delete groups vpn-fw logical-systems PE4 interfaces lo0 unit <*> family inet filter input protect-RE-vpn
	delete logical-systems PE4 apply-groups vpn-fw

	set logical-systems PE4 policy-options prefix-list inet:snmp-prefix 176.67.173.172/32
	set logical-systems PE4 policy-options prefix-list inet:snmp-prefix 69.36.160.0/24
	set logical-systems PE4 policy-options prefix-list inet:snmp-prefix 77.92.94.112/28
	set logical-systems PE4 policy-options prefix-list inet:snmp-prefix 209.50.158.0/23

	set logical-systems PE4 policy-options prefix-list inet:ssh-prefix 77.92.94.112/28
	set logical-systems PE4 policy-options prefix-list inet:ssh-prefix 83.170.64.10/32
	set logical-systems PE4 policy-options prefix-list inet:ssh-prefix 69.36.160.0/24

	set logical-systems PE4 policy-options prefix-list inet:internal-prefix 176.67.173.172/32
	set logical-systems PE4 policy-options prefix-list inet:internal-prefix 69.36.160.0/24
	set logical-systems PE4 policy-options prefix-list inet:internal-prefix 77.92.94.112/28
	set logical-systems PE4 policy-options prefix-list inet:internal-prefix 209.50.158.0/23

	set logical-systems PE4 policy-options prefix-list inet:bgp-prefix apply-path "logical-systems PE4 protocols bgp group <*> neighbor <*>"

	set logical-systems PE4 policy-options prefix-list inet:radius-servers apply-path "system radius-server <*>"

	set logical-systems PE4 policy-options prefix-list inet:tacacs-servers apply-path "system tacplus-server <*>"

	set logical-systems PE4 policy-options prefix-list inet:ntp-server apply-path "system ntp server <*>"

	set logical-systems PE4 policy-options prefix-list inet:dns-servers apply-path "system name-server <*>"

	set logical-systems PE4 policy-options prefix-list RI:bgp-prefix apply-path "logical-systems PE4 protocols bgp group <*> neighbor <*>"






	To check the apply paths are working issue the command show policy options prefix-list inet:ntp-server | display inheritance




	set logical-systems PE5 firewall family inet filter protect-RE-private term first-frag from first-fragment
	set logical-systems PE5 firewall family inet filter protect-RE-private term first-frag then discard
	set logical-systems PE5 firewall family inet filter protect-RE-private term next-frag from is-fragment
	set logical-systems PE5 firewall family inet filter protect-RE-private term next-frag then discard
	set logical-systems PE5 firewall family inet filter protect-RE-private term ssh-in from source-prefix-list inet:ssh-prefix
	set logical-systems PE5 firewall family inet filter protect-RE-private term ssh-in from protocol tcp
	set logical-systems PE5 firewall family inet filter protect-RE-private term ssh-in from port ssh
	set logical-systems PE5 firewall family inet filter protect-RE-private term ssh-in then accept
	set logical-systems PE5 firewall family inet filter protect-RE-private term snmp-limit from source-prefix-list inet:snmp-prefix
	set logical-systems PE5 firewall family inet filter protect-RE-private term snmp-limit from protocol udp
	set logical-systems PE5 firewall family inet filter protect-RE-private term snmp-limit from port snmp
	set logical-systems PE5 firewall family inet filter protect-RE-private term snmp-limit then accept
	set logical-systems PE5 firewall family inet filter protect-RE-private term bgp-in from source-prefix-list inet:bgp-prefix
	set logical-systems PE5 firewall family inet filter protect-RE-private term bgp-in from protocol tcp
	set logical-systems PE5 firewall family inet filter protect-RE-private term bgp-in from port bgp
	set logical-systems PE5 firewall family inet filter protect-RE-private term bgp-in then accept
	set logical-systems PE5 firewall family inet filter protect-RE-private term traceroute-in from source-prefix-list inet:internal-prefix
	set logical-systems PE5 firewall family inet filter protect-RE-private term traceroute-in from protocol udp
	set logical-systems PE5 firewall family inet filter protect-RE-private term traceroute-in from destination-port 33434-33523
	set logical-systems PE5 firewall family inet filter protect-RE-private term traceroute-in then policer 10m-policer
	set logical-systems PE5 firewall family inet filter protect-RE-private term traceroute-in then accept
	set logical-systems PE5 firewall family inet filter protect-RE-private term bfd-in from source-prefix-list inet:bgp-prefix
	set logical-systems PE5 firewall family inet filter protect-RE-private term bfd-in from protocol udp
	set logical-systems PE5 firewall family inet filter protect-RE-private term bfd-in from destination-port 3784
	set logical-systems PE5 firewall family inet filter protect-RE-private term bfd-in then accept
	set logical-systems PE5 firewall family inet filter protect-RE-private term icmp-limit from source-prefix-list inet:internal-prefix
	set logical-systems PE5 firewall family inet filter protect-RE-private term icmp-limit from protocol icmp
	set logical-systems PE5 firewall family inet filter protect-RE-private term icmp-limit then policer 10m-policer
	set logical-systems PE5 firewall family inet filter protect-RE-private term icmp-limit then accept
	set logical-systems PE5 firewall family inet filter protect-RE-private term ntp-in from source-prefix-list inet:ntp-server
	set logical-systems PE5 firewall family inet filter protect-RE-private term ntp-in from protocol udp
	set logical-systems PE5 firewall family inet filter protect-RE-private term ntp-in from port ntp
	set logical-systems PE5 firewall family inet filter protect-RE-private term ntp-in then accept
	set logical-systems PE5 firewall family inet filter protect-RE-private term tacacs-reply from source-prefix-list inet:tacacs-servers
	set logical-systems PE5 firewall family inet filter protect-RE-private term tacacs-reply from protocol tcp
	set logical-systems PE5 firewall family inet filter protect-RE-private term tacacs-reply from source-port 49
	set logical-systems PE5 firewall family inet filter protect-RE-private term tacacs-reply then accept
	set logical-systems PE5 firewall family inet filter protect-RE-private term dns-reply from source-prefix-list inet:dns-servers
	set logical-systems PE5 firewall family inet filter protect-RE-private term dns-reply from protocol udp
	set logical-systems PE5 firewall family inet filter protect-RE-private term dns-reply from source-port domain
	set logical-systems PE5 firewall family inet filter protect-RE-private term dns-reply then accept
	set logical-systems PE5 firewall family inet filter protect-RE-private term discard-last then discard

	set logical-systems PE5 firewall family inet filter protect-RE-vpn term first-frag from first-fragment
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term first-frag then discard
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term next-frag from is-fragment
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term next-frag then discard
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term traceroute-limit from protocol udp
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term traceroute-limit from destination-port 33434-33523
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term traceroute-limit then policer 10m-policer
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term traceroute-limit then count traceroute-traffic
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term traceroute-limit then accept
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term icmp-limit from protocol icmp
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type echo-request
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type echo-reply
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type unreachable
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type time-exceeded
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term icmp-limit then count icmp-traffic
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term icmp-limit then policer 10m-policer
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term icmp-limit then accept
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term bgp-limit from source-prefix-list RI:bgp-prefix
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term bgp-limit from protocol tcp
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term bgp-limit from port bgp
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term bgp-limit then accept
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term bfd-in from source-prefix-list RI:bgp-prefix
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term bfd-in from protocol udp
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term bfd-in from destination-port 3784
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term bfd-in from destination-port 3785
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term bfd-in then accept
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term discard-last then count discard-traffic
	set logical-systems PE5 firewall family inet filter protect-RE-vpn term discard-last then discard

	set logical-systems PE5 firewall policer 10m-policer if-exceeding bandwidth-limit 10m
	set logical-systems PE5 firewall policer 10m-policer if-exceeding burst-size-limit 256k
	set logical-systems PE5 firewall policer 10m-policer then discard

	delete groups re-fw logical-systems PE5 interfaces lo0 unit <*> family inet filter input protect-RE-private
	delete logical-systems PE5 apply-groups re-fw
	delete groups vpn-fw logical-systems PE5 interfaces lo0 unit <*> family inet filter input protect-RE-vpn
	delete logical-systems PE5 apply-groups vpn-fw

	set logical-systems PE5 policy-options prefix-list inet:snmp-prefix 176.67.173.172/32
	set logical-systems PE5 policy-options prefix-list inet:snmp-prefix 69.36.160.0/24
	set logical-systems PE5 policy-options prefix-list inet:snmp-prefix 77.92.94.112/28
	set logical-systems PE5 policy-options prefix-list inet:snmp-prefix 209.50.158.0/23

	set logical-systems PE5 policy-options prefix-list inet:ssh-prefix 77.92.94.112/28
	set logical-systems PE5 policy-options prefix-list inet:ssh-prefix 83.170.64.10/32
	set logical-systems PE5 policy-options prefix-list inet:ssh-prefix 69.36.160.0/24

	set logical-systems PE5 policy-options prefix-list inet:internal-prefix 176.67.173.172/32
	set logical-systems PE5 policy-options prefix-list inet:internal-prefix 69.36.160.0/24
	set logical-systems PE5 policy-options prefix-list inet:internal-prefix 77.92.94.112/28
	set logical-systems PE5 policy-options prefix-list inet:internal-prefix 209.50.158.0/23

	set logical-systems PE5 policy-options prefix-list inet:bgp-prefix apply-path "logical-systems PE5 protocols bgp group <*> neighbor <*>"

	set logical-systems PE5 policy-options prefix-list inet:radius-servers apply-path "system radius-server <*>"

	set logical-systems PE5 policy-options prefix-list inet:tacacs-servers apply-path "system tacplus-server <*>"

	set logical-systems PE5 policy-options prefix-list inet:ntp-server apply-path "system ntp server <*>"

	set logical-systems PE5 policy-options prefix-list inet:dns-servers apply-path "system name-server <*>"

	set logical-systems PE5 policy-options prefix-list RI:bgp-prefix apply-path "logical-systems PE5 protocols bgp group <*> neighbor <*>"






	To check the apply paths are working issue the command show policy options prefix-list inet:ntp-server | display inheritance


	set logical-systems PE6 firewall family inet filter protect-RE-private term first-frag from first-fragment
	set logical-systems PE6 firewall family inet filter protect-RE-private term first-frag then discard
	set logical-systems PE6 firewall family inet filter protect-RE-private term next-frag from is-fragment
	set logical-systems PE6 firewall family inet filter protect-RE-private term next-frag then discard
	set logical-systems PE6 firewall family inet filter protect-RE-private term ssh-in from source-prefix-list inet:ssh-prefix
	set logical-systems PE6 firewall family inet filter protect-RE-private term ssh-in from protocol tcp
	set logical-systems PE6 firewall family inet filter protect-RE-private term ssh-in from port ssh
	set logical-systems PE6 firewall family inet filter protect-RE-private term ssh-in then accept
	set logical-systems PE6 firewall family inet filter protect-RE-private term snmp-limit from source-prefix-list inet:snmp-prefix
	set logical-systems PE6 firewall family inet filter protect-RE-private term snmp-limit from protocol udp
	set logical-systems PE6 firewall family inet filter protect-RE-private term snmp-limit from port snmp
	set logical-systems PE6 firewall family inet filter protect-RE-private term snmp-limit then accept
	set logical-systems PE6 firewall family inet filter protect-RE-private term bgp-in from source-prefix-list inet:bgp-prefix
	set logical-systems PE6 firewall family inet filter protect-RE-private term bgp-in from protocol tcp
	set logical-systems PE6 firewall family inet filter protect-RE-private term bgp-in from port bgp
	set logical-systems PE6 firewall family inet filter protect-RE-private term bgp-in then accept
	set logical-systems PE6 firewall family inet filter protect-RE-private term traceroute-in from source-prefix-list inet:internal-prefix
	set logical-systems PE6 firewall family inet filter protect-RE-private term traceroute-in from protocol udp
	set logical-systems PE6 firewall family inet filter protect-RE-private term traceroute-in from destination-port 33434-33523
	set logical-systems PE6 firewall family inet filter protect-RE-private term traceroute-in then policer 10m-policer
	set logical-systems PE6 firewall family inet filter protect-RE-private term traceroute-in then accept
	set logical-systems PE6 firewall family inet filter protect-RE-private term bfd-in from source-prefix-list inet:bgp-prefix
	set logical-systems PE6 firewall family inet filter protect-RE-private term bfd-in from protocol udp
	set logical-systems PE6 firewall family inet filter protect-RE-private term bfd-in from destination-port 3784
	set logical-systems PE6 firewall family inet filter protect-RE-private term bfd-in then accept
	set logical-systems PE6 firewall family inet filter protect-RE-private term icmp-limit from source-prefix-list inet:internal-prefix
	set logical-systems PE6 firewall family inet filter protect-RE-private term icmp-limit from protocol icmp
	set logical-systems PE6 firewall family inet filter protect-RE-private term icmp-limit then policer 10m-policer
	set logical-systems PE6 firewall family inet filter protect-RE-private term icmp-limit then accept
	set logical-systems PE6 firewall family inet filter protect-RE-private term ntp-in from source-prefix-list inet:ntp-server
	set logical-systems PE6 firewall family inet filter protect-RE-private term ntp-in from protocol udp
	set logical-systems PE6 firewall family inet filter protect-RE-private term ntp-in from port ntp
	set logical-systems PE6 firewall family inet filter protect-RE-private term ntp-in then accept
	set logical-systems PE6 firewall family inet filter protect-RE-private term tacacs-reply from source-prefix-list inet:tacacs-servers
	set logical-systems PE6 firewall family inet filter protect-RE-private term tacacs-reply from protocol tcp
	set logical-systems PE6 firewall family inet filter protect-RE-private term tacacs-reply from source-port 49
	set logical-systems PE6 firewall family inet filter protect-RE-private term tacacs-reply then accept
	set logical-systems PE6 firewall family inet filter protect-RE-private term dns-reply from source-prefix-list inet:dns-servers
	set logical-systems PE6 firewall family inet filter protect-RE-private term dns-reply from protocol udp
	set logical-systems PE6 firewall family inet filter protect-RE-private term dns-reply from source-port domain
	set logical-systems PE6 firewall family inet filter protect-RE-private term dns-reply then accept
	set logical-systems PE6 firewall family inet filter protect-RE-private term discard-last then discard

	set logical-systems PE6 firewall family inet filter protect-RE-vpn term first-frag from first-fragment
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term first-frag then discard
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term next-frag from is-fragment
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term next-frag then discard
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term traceroute-limit from protocol udp
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term traceroute-limit from destination-port 33434-33523
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term traceroute-limit then policer 10m-policer
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term traceroute-limit then count traceroute-traffic
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term traceroute-limit then accept
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term icmp-limit from protocol icmp
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type echo-request
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type echo-reply
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type unreachable
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term icmp-limit from icmp-type time-exceeded
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term icmp-limit then count icmp-traffic
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term icmp-limit then policer 10m-policer
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term icmp-limit then accept
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term bgp-limit from source-prefix-list RI:bgp-prefix
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term bgp-limit from protocol tcp
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term bgp-limit from port bgp
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term bgp-limit then accept
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term bfd-in from source-prefix-list RI:bgp-prefix
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term bfd-in from protocol udp
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term bfd-in from destination-port 3784
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term bfd-in from destination-port 3785
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term bfd-in then accept
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term discard-last then count discard-traffic
	set logical-systems PE6 firewall family inet filter protect-RE-vpn term discard-last then discard

	set logical-systems PE6 firewall policer 10m-policer if-exceeding bandwidth-limit 10m
	set logical-systems PE6 firewall policer 10m-policer if-exceeding burst-size-limit 256k
	set logical-systems PE6 firewall policer 10m-policer then discard

	delete groups re-fw logical-systems PE6 interfaces lo0 unit <*> family inet filter input protect-RE-private
	delete logical-systems PE6 apply-groups re-fw
	delete groups vpn-fw logical-systems PE6 interfaces lo0 unit <*> family inet filter input protect-RE-vpn
	delete logical-systems PE6 apply-groups vpn-fw

	set logical-systems PE6 policy-options prefix-list inet:snmp-prefix 176.67.173.172/32
	set logical-systems PE6 policy-options prefix-list inet:snmp-prefix 69.36.160.0/24
	set logical-systems PE6 policy-options prefix-list inet:snmp-prefix 77.92.94.112/28
	set logical-systems PE6 policy-options prefix-list inet:snmp-prefix 209.50.158.0/23

	set logical-systems PE6 policy-options prefix-list inet:ssh-prefix 77.92.94.112/28
	set logical-systems PE6 policy-options prefix-list inet:ssh-prefix 83.170.64.10/32
	set logical-systems PE6 policy-options prefix-list inet:ssh-prefix 69.36.160.0/24

	set logical-systems PE6 policy-options prefix-list inet:internal-prefix 176.67.173.172/32
	set logical-systems PE6 policy-options prefix-list inet:internal-prefix 69.36.160.0/24
	set logical-systems PE6 policy-options prefix-list inet:internal-prefix 77.92.94.112/28
	set logical-systems PE6 policy-options prefix-list inet:internal-prefix 209.50.158.0/23

	set logical-systems PE6 policy-options prefix-list inet:bgp-prefix apply-path "logical systems PE6 protocols bgp group <*> neighbor <*>"

	set logical-systems PE6 policy-options prefix-list inet:radius-servers apply-path "system radius-server <*>"

	set logical-systems PE6 policy-options prefix-list inet:tacacs-servers apply-path "system tacplus-server <*>"

	set logical-systems PE6 policy-options prefix-list inet:ntp-server apply-path "system ntp server <*>"

	set logical-systems PE6 policy-options prefix-list inet:dns-servers apply-path "system name-server <*>"

	set logical-systems PE6 policy-options prefix-list RI:bgp-prefix apply-path "logical-systems PE6 protocols bgp group <*> neighbor <*>"






	To check the apply paths are working issue the command show policy options prefix-list inet:ntp-server | display inheritance

	***************************

	set chassis fpc 0 pic 0 tunnel-services bandwidth 1g

	======
	PE1
	======


	set logical-systems PE1 interfaces ge-0/0/2 unit 0 description "Link to vMX-3 / Logical PE-13"
	set logical-systems PE1 interfaces ge-0/0/2 unit 0 family inet address 10.100.3.0/31
	set logical-systems PE1 interfaces ge-0/0/2 unit 0 family iso
	set logical-systems PE1 interfaces ge-0/0/2 unit 0 family mpls

	set logical-systems PE1 interfaces lo0.1 family inet address 10.1.0.1
	set logical-systems PE1 interfaces lo0.1 family iso address 49.0001.0010.0001.0001.00
	set logical-systems PE1 protocols isis interface lo0.1 passive
	set logical-systems PE1 protocols isis interface lt-0/0/10.14 point-to-point
	set logical-systems PE1 protocols isis interface lt-0/0/10.14 level 2 disable
	set logical-systems PE1 protocols isis interface lt-0/0/10.3 point-to-point



	delete logical-systems PE1 protocols isis interface lt-0/0/10.3 level 2 disable
	delete logical-systems PE1 protocols isis interface lt-0/0/10.3 level 1 disable





	set logical-systems PE1 protocols isis ignore-attached-bit
	set logical-systems PE1 protocols isis level 1 wide-metrics-only
	set logical-systems PE1 protocols isis level 2 wide-metrics-only
	set logical-systems PE1 protocols isis ignore-attached-bit
	set logical-systems PE1 protocols isis interface ge-0/0/2.0 point-to-point
	set logical-systems PE1 protocols isis interface ge-0/0/2.0 level 1 disable


	set logical-systems PE1 interfaces lt-0/0/10 unit 14 encapsulation vlan
	set logical-systems PE1 interfaces lt-0/0/10 unit 14 vlan-id 2
	set logical-systems PE1 interfaces lt-0/0/10 unit 14 description "Link to PE3"
	set logical-systems PE1 interfaces lt-0/0/10 unit 14 peer-unit 13
	set logical-systems PE1 interfaces lt-0/0/10 unit 14 family inet address 10.10.6.1/31
	set logical-systems PE1 interfaces lt-0/0/10 unit 14 family iso


	set logical-systems PE1 interfaces lt-0/0/10 unit 3 encapsulation vlan
	set logical-systems PE1 interfaces lt-0/0/10 unit 3 vlan-id 2
	set logical-systems PE1 interfaces lt-0/0/10 unit 3 description "Link to PE2"
	set logical-systems PE1 interfaces lt-0/0/10 unit 3 peer-unit 4
	set logical-systems PE1 interfaces lt-0/0/10 unit 3 family inet address 10.10.1.0/31
	set logical-systems PE1 interfaces lt-0/0/10 unit 3 family iso




PE4 to PE1 move:
	delete logical-systems PE4 interfaces ge-0/0/0
	delete logical-systems PE4 interfaces ge-0/0/0 unit 0 description "Link to vMX-2 / Logical PE-9"
	delete logical-systems PE4 interfaces ge-0/0/0 unit 0 family inet address 10.100.1.0/31
	delete logical-systems PE4 interfaces ge-0/0/0 unit 0 family iso

	delete logical-systems PE4 protocols isis interface ge-0/0/0

	set logical-systems PE1 interfaces ge-0/0/0 unit 0 description "Link to vMX-2 / Logical PE-8"
	set logical-systems PE1 interfaces ge-0/0/0 unit 0 family inet address 10.100.1.0/31
	set logical-systems PE1 interfaces ge-0/0/0 unit 0 family iso

	set logical-systems PE1 protocols isis interface ge-0/0/0.0 point-to-point
	set logical-systems PE1 protocols isis interface ge-0/0/0.0 level 1 disable
	set logical-systems PE1 interfaces ge-0/0/0 unit 0 family mpls





delete logical-systems PE1 protocols isis level 1 preference 6
delete logical-systems PE1 protocols isis level 2 preference 6


delete logical-systems PE2 protocols isis level 1 preference 6
delete logical-systems PE2 protocols isis level 2 preference 6

	======
	PE2
	======


	set logical-systems PE2 interfaces ge-0/0/1 unit 0 description "Link to vMX-2 / Logical PE-7"
	set logical-systems PE2 interfaces ge-0/0/1 unit 0 family inet address 10.100.1.2/31
	set logical-systems PE2 interfaces ge-0/0/1 unit 0 family iso
	set logical-systems PE2 interfaces ge-0/0/1 unit 0 family mpls

	set logical-systems PE2 interfaces ge-0/0/3 unit 0 description "Link to vMX-3 / Logical PE-14"
	set logical-systems PE2 interfaces ge-0/0/3 unit 0 family inet address 10.100.3.2/31
	set logical-systems PE2 interfaces ge-0/0/3 unit 0 family iso
	set logical-systems PE2 interfaces ge-0/0/3 unit 0 family mpls


	set logical-systems PE2 interfaces lo0.2 family inet address 10.1.0.2
	set logical-systems PE2 interfaces lo0.2 family iso address 49.0001.0010.0001.0002.00
	set logical-systems PE2 protocols isis interface lo0.2 passive



	delete logical-systems PE2 protocols isis interface lt-0/0/10.4 level 2 disable
	delete logical-systems PE2 protocols isis interface lt-0/0/10.4 level 1 disable



	set logical-systems PE2 protocols isis interface lt-0/0/10.5 level 2 disable
	set logical-systems PE2 protocols isis interface lt-0/0/10.4 point-to-point
	set logical-systems PE2 protocols isis interface lt-0/0/10.5 point-to-point
	set logical-systems PE2 protocols isis ignore-attached-bit
	set logical-systems PE2 protocols isis level 1 wide-metrics-only
	set logical-systems PE2 protocols isis level 2 wide-metrics-only
	set logical-systems PE2 protocols isis ignore-attached-bit
	set logical-systems PE2 protocols isis interface ge-0/0/1.0 point-to-point
	set logical-systems PE2 protocols isis interface ge-0/0/1.0 level 1 disable
	set logical-systems PE2 protocols isis interface ge-0/0/3.0 point-to-point
	set logical-systems PE2 protocols isis interface ge-0/0/3.0 level 1 disable

	set logical-systems PE2 interfaces lt-0/0/10 unit 4 encapsulation vlan
	set logical-systems PE2 interfaces lt-0/0/10 unit 4 vlan-id 2
	set logical-systems PE2 interfaces lt-0/0/10 unit 4 description "Link to PE1"
	set logical-systems PE2 interfaces lt-0/0/10 unit 4 peer-unit 3
	set logical-systems PE2 interfaces lt-0/0/10 unit 4 family inet address 10.10.1.1/31
	set logical-systems PE2 interfaces lt-0/0/10 unit 4 family iso

	set logical-systems PE2 interfaces lt-0/0/10 unit 5 encapsulation vlan
	set logical-systems PE2 interfaces lt-0/0/10 unit 5 vlan-id 2
	set logical-systems PE2 interfaces lt-0/0/10 unit 5 description "Link to PE4"
	set logical-systems PE2 interfaces lt-0/0/10 unit 5 peer-unit 6
	set logical-systems PE2 interfaces lt-0/0/10 unit 5 family inet address 10.10.2.0/31
	set logical-systems PE2 interfaces lt-0/0/10 unit 5 family iso



	======
	PE4
	======


	set logical-systems PE4 interfaces lo0.4 family inet address 10.1.0.4
	set logical-systems PE4 interfaces lo0.4 family iso address 49.0001.0010.0001.0004.00
	set logical-systems PE4 protocols isis interface lo0.4 passive
	set logical-systems PE4 protocols isis interface lt-0/0/10.6 level 2 disable
	set logical-systems PE4 protocols isis interface lt-0/0/10.7 level 2 disable
	set logical-systems PE4 protocols isis interface lt-0/0/10.6 point-to-point
	set logical-systems PE4 protocols isis interface lt-0/0/10.7 point-to-point
	set logical-systems PE4 protocols isis interface lt-0/0/10.16 level 2 disable
	set logical-systems PE4 protocols isis interface lt-0/0/10.16 point-to-point
	set logical-systems PE4 protocols isis ignore-attached-bit
	set logical-systems PE4 protocols isis level 1 wide-metrics-only
	set logical-systems PE4 protocols isis level 2 wide-metrics-only
	set logical-systems PE4 protocols isis ignore-attached-bit


	set logical-systems PE4 interfaces lt-0/0/10 unit 6 encapsulation vlan
	set logical-systems PE4 interfaces lt-0/0/10 unit 6 vlan-id 2
	set logical-systems PE4 interfaces lt-0/0/10 unit 6 description "Link to PE2"
	set logical-systems PE4 interfaces lt-0/0/10 unit 6 peer-unit 5
	set logical-systems PE4 interfaces lt-0/0/10 unit 6 family inet address 10.10.2.1/31
	set logical-systems PE4 interfaces lt-0/0/10 unit 6 family iso


	set logical-systems PE4 interfaces lt-0/0/10 unit 7 encapsulation vlan
	set logical-systems PE4 interfaces lt-0/0/10 unit 7 vlan-id 2
	set logical-systems PE4 interfaces lt-0/0/10 unit 7 description "Link to PE6"
	set logical-systems PE4 interfaces lt-0/0/10 unit 7 peer-unit 8
	set logical-systems PE4 interfaces lt-0/0/10 unit 7 family inet address 10.10.3.0/31
	set logical-systems PE4 interfaces lt-0/0/10 unit 7 family iso


	set logical-systems PE4 interfaces lt-0/0/10 unit 16 encapsulation vlan
	set logical-systems PE4 interfaces lt-0/0/10 unit 16 vlan-id 2
	set logical-systems PE4 interfaces lt-0/0/10 unit 16 description "Link to PE3"
	set logical-systems PE4 interfaces lt-0/0/10 unit 16 peer-unit 15
	set logical-systems PE4 interfaces lt-0/0/10 unit 16 family inet address 10.10.7.1/31
	set logical-systems PE4 interfaces lt-0/0/10 unit 16 family iso



	======
	PE6
	======


	set logical-systems PE6 interfaces lo0.6 family inet address 10.1.0.6
	set logical-systems PE6 interfaces lo0.6 family iso address 49.0001.0010.0001.0006.00
	set logical-systems PE6 protocols isis interface lo0.6 passive
	set logical-systems PE6 protocols isis interface lt-0/0/10.8 level 2 disable
	set logical-systems PE6 protocols isis interface lt-0/0/10.9 level 2 disable
	set logical-systems PE6 protocols isis interface lt-0/0/10.8 point-to-point
	set logical-systems PE6 protocols isis interface lt-0/0/10.9 point-to-point
	set logical-systems PE6 protocols isis ignore-attached-bit
	set logical-systems PE6 protocols isis level 1 wide-metrics-only


	set logical-systems PE6 interfaces lt-0/0/10 unit 8 encapsulation vlan
	set logical-systems PE6 interfaces lt-0/0/10 unit 8 vlan-id 2
	set logical-systems PE6 interfaces lt-0/0/10 unit 8 description "Link to PE4"
	set logical-systems PE6 interfaces lt-0/0/10 unit 8 peer-unit 7
	set logical-systems PE6 interfaces lt-0/0/10 unit 8 family inet address 10.10.3.1/31
	set logical-systems PE6 interfaces lt-0/0/10 unit 8 family iso


	set logical-systems PE6 interfaces lt-0/0/10 unit 9 encapsulation vlan
	set logical-systems PE6 interfaces lt-0/0/10 unit 9 vlan-id 2
	set logical-systems PE6 interfaces lt-0/0/10 unit 9 description "Link to PE5"
	set logical-systems PE6 interfaces lt-0/0/10 unit 9 peer-unit 10
	set logical-systems PE6 interfaces lt-0/0/10 unit 9 family inet address 10.10.4.0/31
	set logical-systems PE6 interfaces lt-0/0/10 unit 9 family iso



	======
	PE5
	======

	set logical-systems PE5 interfaces lo0.5 family inet address 10.1.0.5
	set logical-systems PE5 interfaces lo0.5 family iso address 49.0001.0010.0001.0005.00
	set logical-systems PE5 protocols isis interface lo0.5 passive
	set logical-systems PE5 protocols isis interface lt-0/0/10.10 level 2 disable
	set logical-systems PE5 protocols isis interface lt-0/0/10.11 level 2 disable
	set logical-systems PE5 protocols isis interface lt-0/0/10.10 point-to-point
	set logical-systems PE5 protocols isis interface lt-0/0/10.11 point-to-point
	set logical-systems PE5 protocols isis ignore-attached-bit
	set logical-systems PE5 protocols isis level 1 wide-metrics-only


	set logical-systems PE5 interfaces lt-0/0/10 unit 10 encapsulation vlan
	set logical-systems PE5 interfaces lt-0/0/10 unit 10 vlan-id 2
	set logical-systems PE5 interfaces lt-0/0/10 unit 10 description "Link to PE6"
	set logical-systems PE5 interfaces lt-0/0/10 unit 10 peer-unit 9
	set logical-systems PE5 interfaces lt-0/0/10 unit 10 family inet address 10.10.4.1/31
	set logical-systems PE5 interfaces lt-0/0/10 unit 10 family iso


	set logical-systems PE5 interfaces lt-0/0/10 unit 11 encapsulation vlan
	set logical-systems PE5 interfaces lt-0/0/10 unit 11 vlan-id 2
	set logical-systems PE5 interfaces lt-0/0/10 unit 11 description "Link to PE3"
	set logical-systems PE5 interfaces lt-0/0/10 unit 11 peer-unit 12
	set logical-systems PE5 interfaces lt-0/0/10 unit 11 family inet address 10.10.5.0/31
	set logical-systems PE5 interfaces lt-0/0/10 unit 11 family iso




	======
	PE3
	======


	set logical-systems PE3 interfaces lo0.3 family inet address 10.1.0.3
	set logical-systems PE3 interfaces lo0.3 family iso address 49.0001.0010.0001.0003.00
	set logical-systems PE3 protocols isis interface lo0.3 passive
	set logical-systems PE3 protocols isis interface lt-0/0/10.12 level 2 disable
	set logical-systems PE3 protocols isis interface lt-0/0/10.13 level 2 disable
	set logical-systems PE3 protocols isis interface lt-0/0/10.12 point-to-point
	set logical-systems PE3 protocols isis interface lt-0/0/10.13 point-to-point

	set logical-systems PE3 protocols isis interface lt-0/0/10.15 level 2 disable
	set logical-systems PE3 protocols isis interface lt-0/0/10.15 point-to-point


	set logical-systems PE3 protocols isis ignore-attached-bit
	set logical-systems PE3 protocols isis level 1 wide-metrics-only


	set logical-systems PE3 interfaces lt-0/0/10 unit 12 encapsulation vlan
	set logical-systems PE3 interfaces lt-0/0/10 unit 12 vlan-id 2
	set logical-systems PE3 interfaces lt-0/0/10 unit 12 description "Link to PE3"
	set logical-systems PE3 interfaces lt-0/0/10 unit 12 peer-unit 11
	set logical-systems PE3 interfaces lt-0/0/10 unit 12 family inet address 10.10.5.1/31
	set logical-systems PE3 interfaces lt-0/0/10 unit 12 family iso


	set logical-systems PE3 interfaces lt-0/0/10 unit 13 encapsulation vlan
	set logical-systems PE3 interfaces lt-0/0/10 unit 13 vlan-id 2
	set logical-systems PE3 interfaces lt-0/0/10 unit 13 description "Link to PE1"
	set logical-systems PE3 interfaces lt-0/0/10 unit 13 peer-unit 14
	set logical-systems PE3 interfaces lt-0/0/10 unit 13 family inet address 10.10.6.0/31
	set logical-systems PE3 interfaces lt-0/0/10 unit 13 family iso


	set logical-systems PE3 interfaces lt-0/0/10 unit 15 encapsulation vlan
	set logical-systems PE3 interfaces lt-0/0/10 unit 15 vlan-id 2
	set logical-systems PE3 interfaces lt-0/0/10 unit 15 description "Link to PE4"
	set logical-systems PE3 interfaces lt-0/0/10 unit 15 peer-unit 16
	set logical-systems PE3 interfaces lt-0/0/10 unit 15 family inet address 10.10.7.0/31
	set logical-systems PE3 interfaces lt-0/0/10 unit 15 family iso




	- ISIS route suppress:

	set logical-systems PE1 policy-options policy-statement suppress-link-subnets from route-filter 10.10.0.0/16 orlonger
	set logical-systems PE1 policy-options policy-statement suppress-link-subnets from route-filter 10.100.0.0/16 orlonger
	set logical-systems PE1 policy-options policy-statement suppress-link-subnets then reject
	set logical-systems PE1 protocols isis import suppress-link-subnets
	set logical-systems PE1 protocols isis export suppress-link-subnets

	set logical-systems PE2 policy-options policy-statement suppress-link-subnets from route-filter 10.10.0.0/16 orlonger
	set logical-systems PE2 policy-options policy-statement suppress-link-subnets from route-filter 10.100.0.0/16 orlonger
	set logical-systems PE2 policy-options policy-statement suppress-link-subnets then reject
	set logical-systems PE2 protocols isis import suppress-link-subnets
	set logical-systems PE2 protocols isis export suppress-link-subnets

	set logical-systems PE3 policy-options policy-statement suppress-link-subnets from route-filter 10.10.0.0/16 orlonger
	set logical-systems PE3 policy-options policy-statement suppress-link-subnets from route-filter 10.100.0.0/16 orlonger
	set logical-systems PE3 policy-options policy-statement suppress-link-subnets then reject
	set logical-systems PE3 protocols isis import suppress-link-subnets
	set logical-systems PE3 protocols isis export suppress-link-subnets

	set logical-systems PE4 policy-options policy-statement suppress-link-subnets from route-filter 10.10.0.0/16 orlonger
	set logical-systems PE4 policy-options policy-statement suppress-link-subnets from route-filter 10.100.0.0/16 orlonger
	set logical-systems PE4 policy-options policy-statement suppress-link-subnets then reject
	set logical-systems PE4 protocols isis import suppress-link-subnets
	set logical-systems PE4 protocols isis export suppress-link-subnets

	set logical-systems PE5 policy-options policy-statement suppress-link-subnets from route-filter 10.10.0.0/16 orlonger
	set logical-systems PE5 policy-options policy-statement suppress-link-subnets from route-filter 10.100.0.0/16 orlonger
	set logical-systems PE5 policy-options policy-statement suppress-link-subnets then reject
	set logical-systems PE5 protocols isis import suppress-link-subnets
	set logical-systems PE5 protocols isis export suppress-link-subnets

	set logical-systems PE6 policy-options policy-statement suppress-link-subnets from route-filter 10.10.0.0/16 orlonger
	set logical-systems PE6 policy-options policy-statement suppress-link-subnets from route-filter 10.100.0.0/16 orlonger
	set logical-systems PE6 policy-options policy-statement suppress-link-subnets then reject
	set logical-systems PE6 protocols isis import suppress-link-subnets
	set logical-systems PE6 protocols isis export suppress-link-subnets




	***************************************************

						LDP CONFIG

	***************************************************


vMX1:

set logical-systems PE1 protocols ldp interface ge-0/0/2.0
set logical-systems PE1 protocols ldp interface ge-0/0/0.0

set logical-systems PE2 protocols ldp interface ge-0/0/1.0
set logical-systems PE2 protocols ldp interface ge-0/0/3.0






	***************************************************

						RSVP CONFIG

	***************************************************


	RSVP:


	======
	PE1
	======

	set groups GR-LSP logical-systems PE1 protocols mpls label-switched-path <*> adaptive

	delete  logical-systems PE1 protocols mpls


	set logical-systems PE1 protocols mpls apply-groups GR-LSP
	set logical-systems PE1 protocols mpls optimize-timer 1800
	set logical-systems PE1 protocols mpls optimize-switchover-delay 180

	set logical-systems PE1 protocols mpls ipv6-tunneling
	set logical-systems PE1 protocols mpls traffic-engineering
	delete logical-systems PE1 protocols mpls no-propagate-ttl

	
	set logical-systems PE1 protocols mpls interface all
	set logical-systems PE1 protocols rsvp interface lt-0/0/10.14
	set logical-systems PE1 protocols rsvp interface lt-0/0/10.3
	set logical-systems PE1 interfaces lt-0/0/10 unit 14 family mpls
	set logical-systems PE1 interfaces lt-0/0/10 unit 3 family mpls
	set logical-systems PE1 interfaces ge-0/0/2 unit 0 family mpls



	---

	set logical-systems PE1 protocols mpls interface lt-0/0/10.3 admin-group gold
	set logical-systems PE1 protocols mpls interface lt-0/0/10.3 admin-group silver
	delete logical-systems PE1 protocols mpls interface lt-0/0/10.3 admin-group bronze
	set logical-systems PE1 protocols mpls interface lt-0/0/10.14 admin-group gold
	delete logical-systems PE1 protocols mpls interface lt-0/0/10.14 admin-group bronze
	set logical-systems PE1 protocols mpls admin-groups gold 1
	set logical-systems PE1 protocols mpls admin-groups silver 2
	delete logical-systems PE1 protocols mpls admin-groups bronze 3


	set logical-systems PE1 protocols mpls path SECONDARY



	set logical-systems PE1 protocols mpls label-switched-path PE1-to-PE2-Gold to 10.1.0.2
	set logical-systems PE1 protocols mpls label-switched-path PE1-to-PE2-Gold primary path2 admin-group include-any gold


	set logical-systems PE1 protocols mpls label-switched-path PE1-to-PE2-Gold to 10.1.0.2
	set logical-systems PE1 protocols mpls label-switched-path PE1-to-PE2-Gold secondary SECONDARY standby


	set logical-systems PE1 protocols mpls label-switched-path PE1-to-PE3-Gold to 10.1.0.3
	set logical-systems PE1 protocols mpls label-switched-path PE1-to-PE3-Gold primary path3 admin-group include-any gold



	set logical-systems PE1 protocols mpls label-switched-path PE1-to-PE3-Gold to 10.1.0.3
	set logical-systems PE1 protocols mpls label-switched-path PE1-to-PE3-Gold secondary SECONDARY standby


	set logical-systems PE1 protocols mpls label-switched-path PE1-to-PE4-Gold to 10.1.0.4
	set logical-systems PE1 protocols mpls label-switched-path PE1-to-PE4-Gold primary path3 admin-group include-any gold




	set logical-systems PE1 protocols mpls label-switched-path PE1-to-PE4-Gold to 10.1.0.4
	set logical-systems PE1 protocols mpls label-switched-path PE1-to-PE4-Gold secondary SECONDARY standby


	set logical-systems PE1 protocols mpls label-switched-path PE1-to-PE5-Gold to 10.1.0.5
	set logical-systems PE1 protocols mpls label-switched-path PE1-to-PE5-Gold primary path3 admin-group include-any gold

	set logical-systems PE1 protocols mpls label-switched-path PE1-to-PE5-Gold to 10.1.0.5
	set logical-systems PE1 protocols mpls label-switched-path PE1-to-PE5-Gold secondary SECONDARY standby


	set logical-systems PE1 protocols mpls label-switched-path PE1-to-PE6-Gold to 10.1.0.6
	set logical-systems PE1 protocols mpls label-switched-path PE1-to-PE6-Gold primary path3 admin-group include-any gold

	set logical-systems PE1 protocols mpls label-switched-path PE1-to-PE6-Gold to 10.1.0.6
	set logical-systems PE1 protocols mpls label-switched-path PE1-to-PE6-Gold secondary SECONDARY standby



	set logical-systems PE1 protocols mpls path path1 10.1.0.1 loose
	set logical-systems PE1 protocols mpls path path2 10.1.0.2 loose
	set logical-systems PE1 protocols mpls path path3 10.1.0.3 loose
	set logical-systems PE1 protocols mpls path path4 10.1.0.4 loose
	set logical-systems PE1 protocols mpls path path5 10.1.0.5 loose
	set logical-systems PE1 protocols mpls path path6 10.1.0.6 loose

	----



set logical-systems PE1 protocols mpls traffic-engineering bgp-igp-both-ribs


	======
	PE2
	======
	set groups GR-LSP logical-systems PE2 protocols mpls label-switched-path <*> adaptive


	delete  logical-systems PE2 protocols mpls
set logical-systems PE2 protocols mpls traffic-engineering bgp-igp-both-ribs
	set logical-systems PE2 protocols mpls apply-groups GR-LSP
	set logical-systems PE2 protocols mpls optimize-timer 1800
	set logical-systems PE2 protocols mpls optimize-switchover-delay 180

	set logical-systems PE2 protocols mpls ipv6-tunneling
	set logical-systems PE2 protocols mpls traffic-engineering
	delete logical-systems PE2 protocols mpls no-propagate-ttl

	set logical-systems PE2 protocols mpls interface all
	set logical-systems PE2 protocols rsvp interface lt-0/0/10.4
	set logical-systems PE2 protocols rsvp interface lt-0/0/10.5
	set logical-systems PE2 interfaces lt-0/0/10 unit 4 family mpls
	set logical-systems PE2 interfaces lt-0/0/10 unit 5 family mpls
	set logical-systems PE2 interfaces ge-0/0/1 unit 0 family mpls
	set logical-systems PE2 interfaces ge-0/0/3 unit 0 family mpls




	set logical-systems PE2 protocols mpls interface lt-0/0/10.4 admin-group gold
	set logical-systems PE2 protocols mpls interface lt-0/0/10.4 admin-group silver
	delete logical-systems PE2 protocols mpls interface lt-0/0/10.4 admin-group bronze
	set logical-systems PE2 protocols mpls interface lt-0/0/10.5 admin-group silver
	delete logical-systems PE2 protocols mpls interface lt-0/0/10.5 admin-group bronze
	set logical-systems PE2 protocols mpls admin-groups gold 1
	set logical-systems PE2 protocols mpls admin-groups silver 2
	delete logical-systems PE2 protocols mpls admin-groups bronze 3


	set logical-systems PE2 protocols mpls path SECONDARY

	set logical-systems PE2 protocols mpls label-switched-path PE2-to-PE1-Silver to 10.1.0.1
	set logical-systems PE2 protocols mpls label-switched-path PE2-to-PE1-Silver primary path1 admin-group include-any silver

	set logical-systems PE2 protocols mpls label-switched-path PE2-to-PE1-Silver to 10.1.0.1
	set logical-systems PE2 protocols mpls label-switched-path PE2-to-PE1-Silver secondary SECONDARY standby

	set logical-systems PE2 protocols mpls label-switched-path PE2-to-PE3-Silver to 10.1.0.3
	set logical-systems PE2 protocols mpls label-switched-path PE2-to-PE3-Silver primary path4 admin-group include-any silver

	set logical-systems PE2 protocols mpls label-switched-path PE2-to-PE3-Silver to 10.1.0.3
	set logical-systems PE2 protocols mpls label-switched-path PE2-to-PE3-Silver secondary SECONDARY standby

	set logical-systems PE2 protocols mpls label-switched-path PE2-to-PE4-Silver to 10.1.0.4
	set logical-systems PE2 protocols mpls label-switched-path PE2-to-PE4-Silver primary path4 admin-group include-any silver

	set logical-systems PE2 protocols mpls label-switched-path PE2-to-PE4-Silver to 10.1.0.4
	set logical-systems PE2 protocols mpls label-switched-path PE2-to-PE4-Silver secondary SECONDARY standby

	set logical-systems PE2 protocols mpls label-switched-path PE2-to-PE5-Silver to 10.1.0.5
	set logical-systems PE2 protocols mpls label-switched-path PE2-to-PE5-Silver primary path4 admin-group include-any silver

	set logical-systems PE2 protocols mpls label-switched-path PE2-to-PE5-Silver to 10.1.0.5
	set logical-systems PE2 protocols mpls label-switched-path PE2-to-PE5-Silver secondary SECONDARY standby


	set logical-systems PE2 protocols mpls label-switched-path PE2-to-PE6-Silver to 10.1.0.6
	set logical-systems PE2 protocols mpls label-switched-path PE2-to-PE6-Silver primary path4 admin-group include-any silver

	set logical-systems PE2 protocols mpls label-switched-path PE2-to-PE6-Silver to 10.1.0.6
	set logical-systems PE2 protocols mpls label-switched-path PE2-to-PE6-Silver secondary SECONDARY standby



	set logical-systems PE2 protocols mpls path path1 10.1.0.1 loose
	set logical-systems PE2 protocols mpls path path2 10.1.0.2 loose
	set logical-systems PE2 protocols mpls path path3 10.1.0.3 loose
	set logical-systems PE2 protocols mpls path path4 10.1.0.4 loose
	set logical-systems PE2 protocols mpls path path5 10.1.0.5 loose
	set logical-systems PE2 protocols mpls path path6 10.1.0.6 loose





	======
	PE4
	======
	set groups GR-LSP logical-systems PE4 protocols mpls label-switched-path <*> adaptive

	delete logical-systems PE4 protocols mpls 

	set logical-systems PE4 protocols mpls apply-groups GR-LSP
	set logical-systems PE4 protocols mpls optimize-timer 1800
	set logical-systems PE4 protocols mpls optimize-switchover-delay 180

	set logical-systems PE4 protocols mpls ipv6-tunneling
	set logical-systems PE4 protocols mpls traffic-engineering
	delete logical-systems PE4 protocols mpls no-propagate-ttl

	set logical-systems PE4 protocols mpls interface all
	set logical-systems PE4 protocols rsvp interface lt-0/0/10.6
	set logical-systems PE4 protocols rsvp interface lt-0/0/10.7
	set logical-systems PE4 protocols rsvp interface lt-0/0/10.16
	set logical-systems PE4 interfaces lt-0/0/10 unit 6 family mpls
	set logical-systems PE4 interfaces lt-0/0/10 unit 7 family mpls
	set logical-systems PE4 interfaces lt-0/0/10 unit 16 family mpls



	set logical-systems PE4 protocols mpls path SECONDARY

	set logical-systems PE4 protocols mpls interface lt-0/0/10.6 admin-group silver
	delete logical-systems PE4 protocols mpls interface lt-0/0/10.6 admin-group bronze
	set logical-systems PE4 protocols mpls interface lt-0/0/10.7 admin-group silver
	delete logical-systems PE4 protocols mpls interface lt-0/0/10.7 admin-group bronze
	set logical-systems PE4 protocols mpls interface lt-0/0/10.16 admin-group gold
	set logical-systems PE4 protocols mpls interface lt-0/0/10.16 admin-group silver
	delete logical-systems PE4 protocols mpls interface lt-0/0/10.16 admin-group bronze


	set logical-systems PE4 protocols mpls admin-groups gold 1
	set logical-systems PE4 protocols mpls admin-groups silver 2
	delete logical-systems PE4 protocols mpls admin-groups bronze 3



	set logical-systems PE4 protocols mpls label-switched-path PE4-to-PE1-Silver to 10.1.0.1
	set logical-systems PE4 protocols mpls label-switched-path PE4-to-PE1-Silver primary path2 admin-group include-any silver

	set logical-systems PE4 protocols mpls label-switched-path PE4-to-PE1-Silver to 10.1.0.1
	set logical-systems PE4 protocols mpls label-switched-path PE4-to-PE1-Silver secondary SECONDARY standby

	set logical-systems PE4 protocols mpls label-switched-path PE4-to-PE2-Silver to 10.1.0.2
	set logical-systems PE4 protocols mpls label-switched-path PE4-to-PE2-Silver primary path2 admin-group include-any silver

	set logical-systems PE4 protocols mpls label-switched-path PE4-to-PE2-Silver to 10.1.0.2
	set logical-systems PE4 protocols mpls label-switched-path PE4-to-PE2-Silver secondary SECONDARY standby

	set logical-systems PE4 protocols mpls label-switched-path PE4-to-PE3-Silver to 10.1.0.3
	set logical-systems PE4 protocols mpls label-switched-path PE4-to-PE3-Silver primary path3 admin-group include-any silver

	set logical-systems PE4 protocols mpls label-switched-path PE4-to-PE3-Silver to 10.1.0.3
	set logical-systems PE4 protocols mpls label-switched-path PE4-to-PE3-Silver secondary SECONDARY standby


	set logical-systems PE4 protocols mpls label-switched-path PE4-to-PE5-Silver to 10.1.0.5
	set logical-systems PE4 protocols mpls label-switched-path PE4-to-PE5-Silver primary path6 admin-group include-any silver

	set logical-systems PE4 protocols mpls label-switched-path PE4-to-PE5-Silver to 10.1.0.5
	set logical-systems PE4 protocols mpls label-switched-path PE4-to-PE5-Silver secondary SECONDARY standby


	set logical-systems PE4 protocols mpls label-switched-path PE4-to-PE6-Silver to 10.1.0.6
	set logical-systems PE4 protocols mpls label-switched-path PE4-to-PE6-Silver primary path6 admin-group include-any silver

	set logical-systems PE4 protocols mpls label-switched-path PE4-to-PE6-Silver to 10.1.0.6
	set logical-systems PE4 protocols mpls label-switched-path PE4-to-PE6-Silver secondary SECONDARY standby



	set logical-systems PE4 protocols mpls path path1 10.1.0.1 loose
	set logical-systems PE4 protocols mpls path path2 10.1.0.2 loose
	set logical-systems PE4 protocols mpls path path3 10.1.0.3 loose
	set logical-systems PE4 protocols mpls path path4 10.1.0.4 loose
	set logical-systems PE4 protocols mpls path path5 10.1.0.5 loose
	set logical-systems PE4 protocols mpls path path6 10.1.0.6 loose






	======
	PE6
	======

	set groups GR-LSP logical-systems PE6 protocols mpls label-switched-path <*> adaptive

	delete logical-systems PE6 protocols mpls


	set logical-systems PE6 protocols mpls apply-groups GR-LSP
	set logical-systems PE6 protocols mpls optimize-timer 1800
	set logical-systems PE6 protocols mpls optimize-switchover-delay 180

	set logical-systems PE6 protocols mpls ipv6-tunneling
	set logical-systems PE6 protocols mpls traffic-engineering
	delete logical-systems PE6 protocols mpls no-propagate-ttl

	set logical-systems PE6 protocols mpls interface all
	set logical-systems PE6 protocols rsvp interface lt-0/0/10.8
	set logical-systems PE6 protocols rsvp interface lt-0/0/10.9
	set logical-systems PE6 interfaces lt-0/0/10 unit 8 family mpls
	set logical-systems PE6 interfaces lt-0/0/10 unit 9 family mpls


	set logical-systems PE6 protocols mpls path SECONDARY










	set logical-systems PE6 protocols mpls interface lt-0/0/10.8 admin-group silver
	delete logical-systems PE6 protocols mpls interface lt-0/0/10.8 admin-group bronze
	set logical-systems PE6 protocols mpls interface lt-0/0/10.9 admin-group gold
	set logical-systems PE6 protocols mpls interface lt-0/0/10.9 admin-group silver
	delete logical-systems PE6 protocols mpls interface lt-0/0/10.9 admin-group bronze


	set logical-systems PE6 protocols mpls admin-groups gold 1
	set logical-systems PE6 protocols mpls admin-groups silver 2
	delete logical-systems PE6 protocols mpls admin-groups bronze 3



	set logical-systems PE6 protocols mpls label-switched-path PE6-to-PE1-Silver to 10.1.0.1
	set logical-systems PE6 protocols mpls label-switched-path PE6-to-PE1-Silver primary path2 admin-group include-any silver

	set logical-systems PE6 protocols mpls label-switched-path PE6-to-PE1-Silver to 10.1.0.1
	set logical-systems PE6 protocols mpls label-switched-path PE6-to-PE1-Silver secondary  SECONDARY standby

	set logical-systems PE6 protocols mpls label-switched-path PE6-to-PE2-Silver to 10.1.0.2
	set logical-systems PE6 protocols mpls label-switched-path PE6-to-PE2-Silver primary path4 admin-group include-any silver

	set logical-systems PE6 protocols mpls label-switched-path PE6-to-PE2-Silver to 10.1.0.2
	set logical-systems PE6 protocols mpls label-switched-path PE6-to-PE2-Silver secondary SECONDARY standby

	set logical-systems PE6 protocols mpls label-switched-path PE6-to-PE3-Silver to 10.1.0.3
	set logical-systems PE6 protocols mpls label-switched-path PE6-to-PE3-Silver primary path4 admin-group include-any silver

	set logical-systems PE6 protocols mpls label-switched-path PE6-to-PE3-Silver to 10.1.0.3
	set logical-systems PE6 protocols mpls label-switched-path PE6-to-PE3-Silver secondary SECONDARY standby

	set logical-systems PE6 protocols mpls label-switched-path PE6-to-PE4-Silver to 10.1.0.4
	set logical-systems PE6 protocols mpls label-switched-path PE6-to-PE4-Silver primary path4 admin-group include-any silver

	set logical-systems PE6 protocols mpls label-switched-path PE6-to-PE4-Silver to 10.1.0.4
	set logical-systems PE6 protocols mpls label-switched-path PE6-to-PE4-Silver secondary SECONDARY standby

	set logical-systems PE6 protocols mpls label-switched-path PE6-to-PE5-Silver to 10.1.0.5
	set logical-systems PE6 protocols mpls label-switched-path PE6-to-PE5-Silver primary path5 admin-group include-any silver

	set logical-systems PE6 protocols mpls label-switched-path PE6-to-PE5-Silver to 10.1.0.5
	set logical-systems PE6 protocols mpls label-switched-path PE6-to-PE5-Silver secondary SECONDARY standby




	set logical-systems PE6 protocols mpls path path1 10.1.0.1 loose
	set logical-systems PE6 protocols mpls path path2 10.1.0.2 loose
	set logical-systems PE6 protocols mpls path path3 10.1.0.3 loose
	set logical-systems PE6 protocols mpls path path4 10.1.0.4 loose
	set logical-systems PE6 protocols mpls path path5 10.1.0.5 loose
	set logical-systems PE6 protocols mpls path path6 10.1.0.6 loose



	======
	PE5
	======
	set groups GR-LSP logical-systems PE5 protocols mpls label-switched-path <*> adaptive

	delete logical-systems PE5 protocols mpls

	set logical-systems PE5 protocols mpls apply-groups GR-LSP
	set logical-systems PE5 protocols mpls optimize-timer 1800
	set logical-systems PE5 protocols mpls optimize-switchover-delay 180

	set logical-systems PE5 protocols mpls ipv6-tunneling
	set logical-systems PE5 protocols mpls traffic-engineering
	delete logical-systems PE5 protocols mpls no-propagate-ttl

	set logical-systems PE5 protocols mpls interface all
	set logical-systems PE5 protocols rsvp interface lt-0/0/10.10
	set logical-systems PE5 protocols rsvp interface lt-0/0/10.11
	set logical-systems PE5 interfaces lt-0/0/10 unit 10 family mpls
	set logical-systems PE5 interfaces lt-0/0/10 unit 11 family mpls



	set logical-systems PE5 protocols mpls path SECONDARY



	set logical-systems PE5 protocols mpls interface lt-0/0/10.10 admin-group gold
	set logical-systems PE5 protocols mpls interface lt-0/0/10.10 admin-group silver
	delete logical-systems PE5 protocols mpls interface lt-0/0/10.10 admin-group bronze
	set logical-systems PE5 protocols mpls interface lt-0/0/10.11 admin-group gold
	delete logical-systems PE5 protocols mpls interface lt-0/0/10.11 admin-group bronze
	set logical-systems PE5 protocols mpls admin-groups gold 1
	set logical-systems PE5 protocols mpls admin-groups silver 2
	delete logical-systems PE5 protocols mpls admin-groups bronze 3





	set logical-systems PE5 protocols mpls label-switched-path PE5-to-PE1-Gold to 10.1.0.1
	set logical-systems PE5 protocols mpls label-switched-path PE5-to-PE1-Gold primary path3 admin-group include-any gold

	set logical-systems PE5 protocols mpls label-switched-path PE5-to-PE1-Gold to 10.1.0.1
	set logical-systems PE5 protocols mpls label-switched-path PE5-to-PE1-Gold secondary SECONDARY standby

	set logical-systems PE5 protocols mpls label-switched-path PE5-to-PE2-Gold to 10.1.0.2
	set logical-systems PE5 protocols mpls label-switched-path PE5-to-PE2-Gold primary path1 admin-group include-any gold

	set logical-systems PE5 protocols mpls label-switched-path PE5-to-PE2-Gold to 10.1.0.2
	set logical-systems PE5 protocols mpls label-switched-path PE5-to-PE2-Gold secondary  SECONDARY standby

	set logical-systems PE5 protocols mpls label-switched-path PE5-to-PE3-Gold to 10.1.0.3
	set logical-systems PE5 protocols mpls label-switched-path PE5-to-PE3-Gold primary path3 admin-group include-any gold

	set logical-systems PE5 protocols mpls label-switched-path PE5-to-PE3-Gold to 10.1.0.3
	set logical-systems PE5 protocols mpls label-switched-path PE5-to-PE3-Gold secondary SECONDARY standby

	set logical-systems PE5 protocols mpls label-switched-path PE5-to-PE4-Gold to 10.1.0.4
	set logical-systems PE5 protocols mpls label-switched-path PE5-to-PE4-Gold primary path3 admin-group include-any gold

	set logical-systems PE5 protocols mpls label-switched-path PE5-to-PE4-Gold to 10.1.0.4
	set logical-systems PE5 protocols mpls label-switched-path PE5-to-PE4-Gold secondary SECONDARY standby


	set logical-systems PE5 protocols mpls label-switched-path PE5-to-PE6-Gold to 10.1.0.6
	set logical-systems PE5 protocols mpls label-switched-path PE5-to-PE6-Gold primary path6 admin-group include-any gold

	set logical-systems PE5 protocols mpls label-switched-path PE5-to-PE6-Gold to 10.1.0.6
	set logical-systems PE5 protocols mpls label-switched-path PE5-to-PE6-Gold secondary SECONDARY standby



	set logical-systems PE5 protocols mpls path path1 10.1.0.1 loose
	set logical-systems PE5 protocols mpls path path2 10.1.0.2 loose
	set logical-systems PE5 protocols mpls path path3 10.1.0.3 loose
	set logical-systems PE5 protocols mpls path path4 10.1.0.4 loose
	set logical-systems PE5 protocols mpls path path5 10.1.0.5 loose
	set logical-systems PE5 protocols mpls path path6 10.1.0.6 loose




	======
	PE3
	======

	set groups GR-LSP logical-systems PE3 protocols mpls label-switched-path <*> adaptive
	delete logical-systems PE3 protocols mpls

	set logical-systems PE3 protocols mpls apply-groups GR-LSP
	set logical-systems PE3 protocols mpls optimize-timer 1800
	set logical-systems PE3 protocols mpls optimize-switchover-delay 180

	set logical-systems PE3 protocols mpls ipv6-tunneling
	set logical-systems PE3 protocols mpls traffic-engineering
	delete logical-systems PE3 protocols mpls no-propagate-ttl

	set logical-systems PE3 protocols mpls interface all
	set logical-systems PE3 protocols rsvp interface lt-0/0/10.12
	set logical-systems PE3 protocols rsvp interface lt-0/0/10.13
	set logical-systems PE3 protocols rsvp interface lt-0/0/10.15
	set logical-systems PE3 interfaces lt-0/0/10 unit 15 family mpls
	set logical-systems PE3 interfaces lt-0/0/10 unit 12 family mpls
	set logical-systems PE3 interfaces lt-0/0/10 unit 13 family mpls


	delete logical-systems PE3 protocols mpls path PRIMARY
	set logical-systems PE3 protocols mpls path SECONDARY




	set logical-systems PE3 protocols mpls interface lt-0/0/10.12 admin-group gold
	delete logical-systems PE3 protocols mpls interface lt-0/0/10.12 admin-group bronze
	set logical-systems PE3 protocols mpls interface lt-0/0/10.13 admin-group gold
	delete logical-systems PE3 protocols mpls interface lt-0/0/10.13 admin-group bronze
	set logical-systems PE3 protocols mpls interface lt-0/0/10.15 admin-group gold
	set logical-systems PE3 protocols mpls interface lt-0/0/10.15 admin-group silver
	delete logical-systems PE3 protocols mpls interface lt-0/0/10.15 admin-group bronze
	set logical-systems PE3 protocols mpls admin-groups gold 1
	set logical-systems PE3 protocols mpls admin-groups silver 2
	delete logical-systems PE3 protocols mpls admin-groups bronze 3



	set logical-systems PE3 protocols mpls label-switched-path PE3-to-PE1-Gold to 10.1.0.1
	set logical-systems PE3 protocols mpls label-switched-path PE3-to-PE1-Gold primary path1 admin-group include-any gold


	set logical-systems PE3 protocols mpls label-switched-path PE3-to-PE1-Gold to 10.1.0.1
	set logical-systems PE3 protocols mpls label-switched-path PE3-to-PE1-Gold secondary SECONDARY standby


	set logical-systems PE3 protocols mpls label-switched-path PE3-to-PE2-Gold to 10.1.0.2
	set logical-systems PE3 protocols mpls label-switched-path PE3-to-PE2-Gold primary path1 admin-group include-any gold

	set logical-systems PE3 protocols mpls label-switched-path PE3-to-PE2-Gold to 10.1.0.2
	set logical-systems PE3 protocols mpls label-switched-path PE3-to-PE2-Gold secondary SECONDARY standby

	set logical-systems PE3 protocols mpls label-switched-path PE3-to-PE4-Gold to 10.1.0.4
	set logical-systems PE3 protocols mpls label-switched-path PE3-to-PE4-Gold primary path4 admin-group include-any gold

	set logical-systems PE3 protocols mpls label-switched-path PE3-to-PE4-Gold to 10.1.0.4
	set logical-systems PE3 protocols mpls label-switched-path PE3-to-PE4-Gold secondary SECONDARY standby


	set logical-systems PE3 protocols mpls label-switched-path PE3-to-PE5-Gold to 10.1.0.5
	set logical-systems PE3 protocols mpls label-switched-path PE3-to-PE5-Gold primary path5 admin-group include-any gold

	set logical-systems PE3 protocols mpls label-switched-path PE3-to-PE5-Gold to 10.1.0.5
	set logical-systems PE3 protocols mpls label-switched-path PE3-to-PE5-Gold secondary SECONDARY standby


	set logical-systems PE3 protocols mpls label-switched-path PE3-to-PE6-Gold to 10.1.0.6
	set logical-systems PE3 protocols mpls label-switched-path PE3-to-PE6-Gold primary path5 admin-group include-any gold

	set logical-systems PE3 protocols mpls label-switched-path PE3-to-PE6-Gold to 10.1.0.6
	set logical-systems PE3 protocols mpls label-switched-path PE3-to-PE6-Gold secondary SECONDARY standby



	set logical-systems PE3 protocols mpls path path1 10.1.0.1 loose
	set logical-systems PE3 protocols mpls path path2 10.1.0.2 loose
	set logical-systems PE3 protocols mpls path path3 10.1.0.3 loose
	set logical-systems PE3 protocols mpls path path4 10.1.0.4 loose
	set logical-systems PE3 protocols mpls path path5 10.1.0.5 loose
	set logical-systems PE3 protocols mpls path path6 10.1.0.6 loose









	*********************************************************

							BGP Config

	*********************************************************





	PE1 and PE2 are route reflectors:

	L3vpn allow 1 million routes command:

	set logical-systems PE1 routing-options forwarding-table chained-composite-next-hop ingress l3vpn
	set logical-systems PE2 routing-options forwarding-table chained-composite-next-hop ingress l3vpn
	set logical-systems PE3 routing-options forwarding-table chained-composite-next-hop ingress l3vpn
	set logical-systems PE4 routing-options forwarding-table chained-composite-next-hop ingress l3vpn
	set logical-systems PE5 routing-options forwarding-table chained-composite-next-hop ingress l3vpn
	set logical-systems PE6 routing-options forwarding-table chained-composite-next-hop ingress l3vpn


	======
	PE1 - RR
	======



	set logical-systems PE1 routing-options autonomous-system 65100
	set logical-systems PE1 routing-options router-id 10.1.0.1


	IBGP RR
	set logical-systems PE1 protocols bgp group Core-RR-Client type internal
	set logical-systems PE1 protocols bgp group Core-RR-Client export abr-next-hop-self
	set logical-systems PE1 protocols bgp group Core-RR-Client cluster 10.1.0.1
	set logical-systems PE1 protocols bgp group Core-RR-Client local-address 10.1.0.1
	set logical-systems PE1 protocols bgp group Core-RR-Client family inet labeled-unicast resolve-vpn
	set logical-systems PE1 protocols bgp group Core-RR-Client family inet labeled-unicast aigp
	set logical-systems PE1 protocols bgp group Core-RR-Client family inet-vpn any
	set logical-systems PE1 protocols bgp group Core-RR-Client local-as 65100
	set logical-systems PE1 protocols bgp group Core-RR-Client neighbor 10.1.0.3 description "PE3"
	set logical-systems PE1 protocols bgp group Core-RR-Client neighbor 10.1.0.4 description "PE4"
	set logical-systems PE1 protocols bgp group Core-RR-Client neighbor 10.1.0.5 description "PE5"
	set logical-systems PE1 protocols bgp group Core-RR-Client neighbor 10.1.0.6 description "PE6"



 set logical-systems PE1 protocols bgp group Core-RR-Peers-to-APNIC multihop ttl 255

 set logical-systems PE1 protocols bgp group Core-RR-Peers-to-ARIN multihop ttl 255




delete logical-systems PE1 protocols bgp group Core-RR-Peers
	iBGP RR to RR peers group
	set logical-systems PE1 protocols bgp group Core-RR-Peers-to-APNIC type external
	set logical-systems PE1 protocols bgp group Core-RR-Peers-to-APNIC import emea-import
	set logical-systems PE1 protocols bgp group Core-RR-Peers-to-APNIC export abr-export-label
	set logical-systems PE1 protocols bgp group Core-RR-Peers-to-APNIC local-address 10.1.0.1
	set logical-systems PE1 protocols bgp group Core-RR-Peers-to-APNIC family inet labeled-unicast resolve-vpn
	set logical-systems PE1 protocols bgp group Core-RR-Peers-to-APNIC family inet labeled-unicast aigp
	set logical-systems PE1 protocols bgp group Core-RR-Peers-to-APNIC family inet-vpn any
	set logical-systems PE1 protocols bgp group Core-RR-Peers-to-APNIC local-as 65100
	set logical-systems PE1 protocols bgp group Core-RR-Peers-to-APNIC peer-as 65200
	
	set logical-systems PE1 protocols bgp group Core-RR-Peers-to-APNIC neighbor 10.2.0.7 description "APNIC RR PE7"
	set logical-systems PE1 protocols bgp group Core-RR-Peers-to-APNIC neighbor 10.2.0.8 description "APNIC RR PE8"






	set logical-systems PE1 protocols bgp group Core-RR-Peers-to-ARIN type external
	set logical-systems PE1 protocols bgp group Core-RR-Peers-to-ARIN import emea-import
	set logical-systems PE1 protocols bgp group Core-RR-Peers-to-ARIN export abr-export-label
	set logical-systems PE1 protocols bgp group Core-RR-Peers-to-ARIN local-address 10.1.0.1
	set logical-systems PE1 protocols bgp group Core-RR-Peers-to-ARIN family inet labeled-unicast resolve-vpn
	set logical-systems PE1 protocols bgp group Core-RR-Peers-to-ARIN family inet labeled-unicast aigp
	set logical-systems PE1 protocols bgp group Core-RR-Peers-to-ARIN family inet-vpn any
	set logical-systems PE1 protocols bgp group Core-RR-Peers-to-ARIN local-as 65100
	set logical-systems PE1 protocols bgp group Core-RR-Peers-to-ARIN peer-as 65300

	set logical-systems PE1 protocols bgp group Core-RR-Peers-to-ARIN neighbor 10.3.0.13 description "ARIN RR PE13"
	set logical-systems PE1 protocols bgp group Core-RR-Peers-to-ARIN neighbor 10.3.0.14 description "ARIN RR PE14"


	set logical-systems PE1 protocols bgp group RR-Neighbor-Peer type internal
	set logical-systems PE1 protocols bgp group RR-Neighbor-Peer import rr-same-region-import
	set logical-systems PE1 protocols bgp group RR-Neighbor-Peer export abr-export-label
	set logical-systems PE1 protocols bgp group RR-Neighbor-Peer local-address 10.1.0.1
	set logical-systems PE1 protocols bgp group RR-Neighbor-Peer family inet labeled-unicast resolve-vpn
	set logical-systems PE1 protocols bgp group RR-Neighbor-Peer family inet labeled-unicast aigp
	set logical-systems PE1 protocols bgp group RR-Neighbor-Peer family inet-vpn any
	set logical-systems PE1 protocols bgp group RR-Neighbor-Peer local-as 65100
	set logical-systems PE1 protocols bgp group RR-Neighbor-Peer neighbor 10.1.0.2 description "EMEA RR PE2"



	set logical-systems PE1 policy-options policy-statement rr-same-region-import term EMEA-import from route-filter 10.1.0.0/16 orlonger
	set logical-systems PE1 policy-options policy-statement rr-same-region-import term EMEA-import from community EMEA
	set logical-systems PE1 policy-options policy-statement rr-same-region-import term EMEA-import then accept
	set logical-systems PE1 policy-options policy-statement rr-same-region-import term APNIC-import from route-filter 10.2.0.0/16 orlonger
	set logical-systems PE1 policy-options policy-statement rr-same-region-import term APNIC-import from community APNIC
	set logical-systems PE1 policy-options policy-statement rr-same-region-import term APNIC-import then accept
	set logical-systems PE1 policy-options policy-statement rr-same-region-import term ARIN-import from route-filter 10.3.0.0/16 orlonger
	set logical-systems PE1 policy-options policy-statement rr-same-region-import term ARIN-import from community ARIN
	set logical-systems PE1 policy-options policy-statement rr-same-region-import term ARIN-import then accept
	set logical-systems PE1 policy-options policy-statement rr-same-region-import term community-all from community ALL
	set logical-systems PE1 policy-options policy-statement rr-same-region-import term community-all then accept
	set logical-systems PE1 policy-options policy-statement rr-same-region-import then reject



	set logical-systems PE1 policy-options policy-statement emea-import term EMEA-import from route-filter 10.1.0.0/16 orlonger
	set logical-systems PE1 policy-options policy-statement emea-import term EMEA-import from community EMEA
	set logical-systems PE1 policy-options policy-statement emea-import term EMEA-import then reject
	set logical-systems PE1 policy-options policy-statement emea-import term APNIC-import from route-filter 10.2.0.0/16 orlonger
	set logical-systems PE1 policy-options policy-statement emea-import term APNIC-import from community APNIC
	set logical-systems PE1 policy-options policy-statement emea-import term APNIC-import then accept
	set logical-systems PE1 policy-options policy-statement emea-import term ARIN-import from route-filter 10.3.0.0/16 orlonger
	set logical-systems PE1 policy-options policy-statement emea-import term ARIN-import from community ARIN
	set logical-systems PE1 policy-options policy-statement emea-import term ARIN-import then accept
	set logical-systems PE1 policy-options policy-statement emea-import term community-all from community ALL
	set logical-systems PE1 policy-options policy-statement emea-import term community-all then accept
	set logical-systems PE1 policy-options policy-statement emea-import then reject





	This policy is done in the EMEA perspective if it was APAC then the term EMEA-redist would be changed to APAC-redist and route filter updated accordingly
	set logical-systems PE1 policy-options policy-statement abr-export-label term aigp-originate from route-filter 10.1.0.1/32 exact
	set logical-systems PE1 policy-options policy-statement abr-export-label term aigp-originate then community add EMEA
	set logical-systems PE1 policy-options policy-statement abr-export-label term aigp-originate then aigp-originate 0
	set logical-systems PE1 policy-options policy-statement abr-export-label term aigp-originate then accept
	set logical-systems PE1 policy-options policy-statement abr-export-label term EMEA-redist from route-filter 10.1.0.0/16 orlonger
	set logical-systems PE1 policy-options policy-statement abr-export-label term EMEA-redist then community set EMEA
	set logical-systems PE1 policy-options policy-statement abr-export-label term EMEA-redist then accept
	set logical-systems PE1 policy-options policy-statement abr-export-label term APNIC-redist from route-filter 10.2.0.0/16 orlonger
	set logical-systems PE1 policy-options policy-statement abr-export-label term APNIC-redist then community set APNIC
	set logical-systems PE1 policy-options policy-statement abr-export-label term APNIC-redist then accept
	set logical-systems PE1 policy-options policy-statement abr-export-label term ARIN-redist from route-filter 10.3.0.0/16 orlonger
	set logical-systems PE1 policy-options policy-statement abr-export-label term ARIN-redist then community set ARIN
	set logical-systems PE1 policy-options policy-statement abr-export-label term ARIN-redist then accept
	set logical-systems PE1 policy-options policy-statement abr-export-label term community-all from community ALL
	set logical-systems PE1 policy-options policy-statement abr-export-label term community-all then accept
	set logical-systems PE1 policy-options policy-statement abr-export-label then reject


	set logical-systems PE1  policy-options policy-statement abr-next-hop-self term ARIN-redist from route-filter 10.3.0.0/16 orlonger
	set logical-systems PE1  policy-options policy-statement abr-next-hop-self term ARIN-redist then community set ARIN
	set logical-systems PE1  policy-options policy-statement abr-next-hop-self term ARIN-redist then next-hop self
	set logical-systems PE1  policy-options policy-statement abr-next-hop-self term ARIN-redist then accept
	set logical-systems PE1  policy-options policy-statement abr-next-hop-self term APNIC-redist from route-filter 10.2.0.0/16 orlonger
	set logical-systems PE1  policy-options policy-statement abr-next-hop-self term APNIC-redist then community set APNIC
	set logical-systems PE1  policy-options policy-statement abr-next-hop-self term APNIC-redist then next-hop self
	set logical-systems PE1  policy-options policy-statement abr-next-hop-self term APNIC-redist then accept
	set logical-systems PE1  policy-options policy-statement abr-next-hop-self term community-all from community ALL
	set logical-systems PE1  policy-options policy-statement abr-next-hop-self term community-all then accept
	set logical-systems PE1  policy-options policy-statement abr-next-hop-self then reject


	set logical-systems PE1 policy-options community EMEA members target:13213:10
	set logical-systems PE1 policy-options community APNIC members target:13213:11
	set logical-systems PE1 policy-options community ARIN members target:13213:12
	set logical-systems PE1 policy-options community ALL members target:13213:*



	======
	PE2 - RR
	======

	set logical-systems PE2 routing-options autonomous-system 65100
	set logical-systems PE2 routing-options router-id 10.1.0.2

	IBGP RR
	set logical-systems PE2 protocols bgp group Core-RR-Client type internal
	delete logical-systems PE2 protocols bgp group Core-RR-Client export aigp-originate
	set logical-systems PE2 protocols bgp group Core-RR-Client export abr-next-hop-self
	set logical-systems PE2 protocols bgp group Core-RR-Client cluster 10.1.0.2
	set logical-systems PE2 protocols bgp group Core-RR-Client local-address 10.1.0.2
	set logical-systems PE2 protocols bgp group Core-RR-Client family inet labeled-unicast resolve-vpn
	set logical-systems PE2 protocols bgp group Core-RR-Client family inet labeled-unicast aigp
	set logical-systems PE2 protocols bgp group Core-RR-Client family inet-vpn any
	set logical-systems PE2 protocols bgp group Core-RR-Client local-as 65100
	set logical-systems PE2 protocols bgp group Core-RR-Client neighbor 10.1.0.3 description "PE3"
	set logical-systems PE2 protocols bgp group Core-RR-Client neighbor 10.1.0.4 description "PE4"
	set logical-systems PE2 protocols bgp group Core-RR-Client neighbor 10.1.0.5 description "PE5"
	set logical-systems PE2 protocols bgp group Core-RR-Client neighbor 10.1.0.6 description "PE6"



 set logical-systems PE2 protocols bgp group Core-RR-Peers-to-APNIC multihop ttl 255

 set logical-systems PE2 protocols bgp group Core-RR-Peers-to-ARIN multihop ttl 255





delete logical-systems PE2 protocols bgp group Core-RR-Peers
	iBGP RR to RR peers group
	set logical-systems PE2 protocols bgp group Core-RR-Peers-to-APNIC type external
	set logical-systems PE2 protocols bgp group Core-RR-Peers-to-APNIC import emea-import
	set logical-systems PE2 protocols bgp group Core-RR-Peers-to-APNIC export abr-export-label
	set logical-systems PE2 protocols bgp group Core-RR-Peers-to-APNIC local-address 10.1.0.2
	set logical-systems PE2 protocols bgp group Core-RR-Peers-to-APNIC family inet labeled-unicast resolve-vpn
	set logical-systems PE2 protocols bgp group Core-RR-Peers-to-APNIC family inet labeled-unicast aigp
	set logical-systems PE2 protocols bgp group Core-RR-Peers-to-APNIC family inet-vpn any
	set logical-systems PE2 protocols bgp group Core-RR-Peers-to-APNIC local-as 65100
	set logical-systems PE2 protocols bgp group Core-RR-Peers-to-APNIC peer-as 65200
	
	set logical-systems PE2 protocols bgp group Core-RR-Peers-to-APNIC neighbor 10.2.0.7 description "APNIC RR PE7"
	set logical-systems PE2 protocols bgp group Core-RR-Peers-to-APNIC neighbor 10.2.0.8 description "APNIC RR PE8"






	set logical-systems PE2 protocols bgp group Core-RR-Peers-to-ARIN type external
	set logical-systems PE2 protocols bgp group Core-RR-Peers-to-ARIN import emea-import
	set logical-systems PE2 protocols bgp group Core-RR-Peers-to-ARIN export abr-export-label
	set logical-systems PE2 protocols bgp group Core-RR-Peers-to-ARIN local-address 10.1.0.2
	set logical-systems PE2 protocols bgp group Core-RR-Peers-to-ARIN family inet labeled-unicast resolve-vpn
	set logical-systems PE2 protocols bgp group Core-RR-Peers-to-ARIN family inet labeled-unicast aigp
	set logical-systems PE2 protocols bgp group Core-RR-Peers-to-ARIN family inet-vpn any
	set logical-systems PE2 protocols bgp group Core-RR-Peers-to-ARIN local-as 65100
	set logical-systems PE2 protocols bgp group Core-RR-Peers-to-ARIN peer-as 65300

	set logical-systems PE2 protocols bgp group Core-RR-Peers-to-ARIN neighbor 10.3.0.13 description "ARIN RR PE23"
	set logical-systems PE2 protocols bgp group Core-RR-Peers-to-ARIN neighbor 10.3.0.14 description "ARIN RR PE24"


	set logical-systems PE2 protocols bgp group RR-Neighbor-Peer type internal
	set logical-systems PE2 protocols bgp group RR-Neighbor-Peer import rr-same-region-import
	set logical-systems PE2 protocols bgp group RR-Neighbor-Peer export abr-export-label
	set logical-systems PE2 protocols bgp group RR-Neighbor-Peer local-address 10.1.0.2
	set logical-systems PE2 protocols bgp group RR-Neighbor-Peer family inet labeled-unicast resolve-vpn
	set logical-systems PE2 protocols bgp group RR-Neighbor-Peer family inet labeled-unicast aigp
	set logical-systems PE2 protocols bgp group RR-Neighbor-Peer family inet-vpn any
	set logical-systems PE2 protocols bgp group RR-Neighbor-Peer local-as 65100
	set logical-systems PE2 protocols bgp group RR-Neighbor-Peer neighbor 10.1.0.2 description "EMEA RR PE2"







	set logical-systems PE2 policy-options policy-statement rr-same-region-import term EMEA-import from route-filter 10.1.0.0/16 orlonger
	set logical-systems PE2 policy-options policy-statement rr-same-region-import term EMEA-import from community EMEA
	set logical-systems PE2 policy-options policy-statement rr-same-region-import term EMEA-import then accept
	set logical-systems PE2 policy-options policy-statement rr-same-region-import term APNIC-import from route-filter 10.2.0.0/16 orlonger
	set logical-systems PE2 policy-options policy-statement rr-same-region-import term APNIC-import from community APNIC
	set logical-systems PE2 policy-options policy-statement rr-same-region-import term APNIC-import then accept
	set logical-systems PE2 policy-options policy-statement rr-same-region-import term ARIN-import from route-filter 10.3.0.0/16 orlonger
	set logical-systems PE2 policy-options policy-statement rr-same-region-import term ARIN-import from community ARIN
	set logical-systems PE2 policy-options policy-statement rr-same-region-import term ARIN-import then accept
	set logical-systems PE2 policy-options policy-statement rr-same-region-import term community-all from community ALL
	set logical-systems PE2 policy-options policy-statement rr-same-region-import term community-all then accept
	set logical-systems PE2 policy-options policy-statement rr-same-region-import then reject



	set logical-systems PE2 policy-options policy-statement emea-import term EMEA-import from route-filter 10.1.0.0/16 orlonger
	set logical-systems PE2 policy-options policy-statement emea-import term EMEA-import from community EMEA
	set logical-systems PE2 policy-options policy-statement emea-import term EMEA-import then reject
	set logical-systems PE2 policy-options policy-statement emea-import term APNIC-import from route-filter 10.2.0.0/16 orlonger
	set logical-systems PE2 policy-options policy-statement emea-import term APNIC-import from community APNIC
	set logical-systems PE2 policy-options policy-statement emea-import term APNIC-import then accept
	set logical-systems PE2 policy-options policy-statement emea-import term ARIN-import from route-filter 10.3.0.0/16 orlonger
	set logical-systems PE2 policy-options policy-statement emea-import term ARIN-import from community ARIN
	set logical-systems PE2 policy-options policy-statement emea-import term ARIN-import then accept
	set logical-systems PE2 policy-options policy-statement emea-import term community-all from community ALL
	set logical-systems PE2 policy-options policy-statement emea-import term community-all then accept
	set logical-systems PE2 policy-options policy-statement emea-import then reject





	This policy is done in the EMEA perspective if it was APAC then the term EMEA-redist would be changed to APAC-redist and route filter updated accordingly
	set logical-systems PE2 policy-options policy-statement abr-export-label term aigp-originate from route-filter 10.1.0.2/32 exact
	set logical-systems PE2 policy-options policy-statement abr-export-label term aigp-originate then community add EMEA
	set logical-systems PE2 policy-options policy-statement abr-export-label term aigp-originate then aigp-originate 0
	set logical-systems PE2 policy-options policy-statement abr-export-label term aigp-originate then accept
	set logical-systems PE2 policy-options policy-statement abr-export-label term EMEA-redist from route-filter 10.1.0.0/16 orlonger
	set logical-systems PE2 policy-options policy-statement abr-export-label term EMEA-redist then community set EMEA
	delete logical-systems PE2 policy-options policy-statement abr-export-label term EMEA-redist then aigp-originate distance 10000
	delete logical-systems PE2 policy-options policy-statement abr-export-label term EMEA-redist then  next-hop self
	set logical-systems PE2 policy-options policy-statement abr-export-label term EMEA-redist then accept
	set logical-systems PE2 policy-options policy-statement abr-export-label term APNIC-redist from route-filter 10.2.0.0/16 orlonger
	set logical-systems PE2 policy-options policy-statement abr-export-label term APNIC-redist then community set APNIC
	set logical-systems PE2 policy-options policy-statement abr-export-label term APNIC-redist then accept
	set logical-systems PE2 policy-options policy-statement abr-export-label term ARIN-redist from route-filter 10.3.0.0/16 orlonger
	set logical-systems PE2 policy-options policy-statement abr-export-label term ARIN-redist then community set ARIN
	delete logical-systems PE2 policy-options policy-statement abr-export-label term ARIN-redist then aigp-originate distance 10000
	delete logical-systems PE2 policy-options policy-statement abr-export-label term ARIN-redist then  next-hop self
	set logical-systems PE2 policy-options policy-statement abr-export-label term ARIN-redist then accept
	set logical-systems PE2 policy-options policy-statement abr-export-label term community-all from community ALL
	set logical-systems PE2 policy-options policy-statement abr-export-label term community-all then accept
	set logical-systems PE2 policy-options policy-statement abr-export-label then reject


	delete logical-systems PE2  policy-options policy-statement abr-next-hop-self 
	set logical-systems PE2  policy-options policy-statement abr-next-hop-self term ARIN-redist from route-filter 10.3.0.0/16 orlonger
	set logical-systems PE2  policy-options policy-statement abr-next-hop-self term ARIN-redist then community set ARIN
	set logical-systems PE2  policy-options policy-statement abr-next-hop-self term ARIN-redist then next-hop self
	set logical-systems PE2  policy-options policy-statement abr-next-hop-self term ARIN-redist then accept
	set logical-systems PE2  policy-options policy-statement abr-next-hop-self term APNIC-redist from route-filter 10.2.0.0/16 orlonger
	set logical-systems PE2  policy-options policy-statement abr-next-hop-self term APNIC-redist then community set APNIC
	set logical-systems PE2  policy-options policy-statement abr-next-hop-self term APNIC-redist then next-hop self
	set logical-systems PE2  policy-options policy-statement abr-next-hop-self term APNIC-redist then accept
	set logical-systems PE2  policy-options policy-statement abr-next-hop-self term community-all from community ALL
	set logical-systems PE2  policy-options policy-statement abr-next-hop-self term community-all then accept
	set logical-systems PE2  policy-options policy-statement abr-next-hop-self then reject


	set logical-systems PE2 policy-options community EMEA members target:13213:10
	set logical-systems PE2 policy-options community APNIC members target:13213:11
	set logical-systems PE2 policy-options community ARIN members target:13213:12
	set logical-systems PE2 policy-options community ALL members target:13213:*



	=====
	PE3
	=====

	set logical-systems PE3 routing-options autonomous-system 65100
	set logical-systems PE3 routing-options router-id 10.1.0.3

	RR Client Config
	set logical-systems PE3 protocols bgp group Core-RR type internal
	set logical-systems PE3 protocols bgp group Core-RR export aigp-originate
	set logical-systems PE3 protocols bgp group Core-RR local-address 10.1.0.3
	set logical-systems PE3 protocols bgp group Core-RR family inet labeled-unicast resolve-vpn
	set logical-systems PE3 protocols bgp group Core-RR family inet labeled-unicast aigp
	set logical-systems PE3 protocols bgp group Core-RR family inet-vpn any
	set logical-systems PE3 protocols bgp group Core-RR local-as 65100
	set logical-systems PE3 protocols bgp group Core-RR neighbor 10.1.0.1 description "RR PE1"
	set logical-systems PE3 protocols bgp group Core-RR neighbor 10.1.0.2 description "RR PE2"



	set logical-systems PE3 policy-options policy-statement aigp-originate term aigp-originate from route-filter 10.1.0.3/32 exact
	set logical-systems PE3 policy-options policy-statement aigp-originate term aigp-originate then community add EMEA
	set logical-systems PE3 policy-options policy-statement aigp-originate term aigp-originate then aigp-originate 0
	set logical-systems PE3 policy-options policy-statement aigp-originate term aigp-originate then accept
	set logical-systems PE3 policy-options policy-statement aigp-originate term accept-all then reject
	set logical-systems PE3 policy-options policy-statement aigp-originate then reject


	set logical-systems PE3 policy-options community EMEA members target:13213:10
	set logical-systems PE3 policy-options community APNIC members target:13213:11
	set logical-systems PE3 policy-options community ARIN members target:13213:12
	set logical-systems PE3 policy-options community ALL members target:13213:*



	=====
	PE4
	=====

	set logical-systems PE4 routing-options autonomous-system 65100
	set logical-systems PE4 routing-options router-id 10.1.0.4

	RR Client Config
	set logical-systems PE4 protocols bgp group Core-RR type internal
	set logical-systems PE4 protocols bgp group Core-RR export aigp-originate
	delete logical-systems PE4 protocols bgp group Core-RR export abr-export-label
	set logical-systems PE4 protocols bgp group Core-RR local-address 10.1.0.4
	set logical-systems PE4 protocols bgp group Core-RR family inet labeled-unicast resolve-vpn
	set logical-systems PE4 protocols bgp group Core-RR family inet labeled-unicast aigp
	set logical-systems PE4 protocols bgp group Core-RR family inet-vpn any
	set logical-systems PE4 protocols bgp group Core-RR local-as 65100
	set logical-systems PE4 protocols bgp group Core-RR neighbor 10.1.0.1 description "RR PE1"
	set logical-systems PE4 protocols bgp group Core-RR neighbor 10.1.0.2 description "RR PE2"



	ABR Specific
	delete logical-systems PE4 protocols bgp group Core-ABR
	#set logical-systems PE4 protocols bgp group Core-ABR type internal
	#set logical-systems PE4 protocols bgp group Core-ABR import emea-import
	#set logical-systems PE4 protocols bgp group Core-ABR export abr-export-label
	#delete logical-systems PE4 protocols bgp group Core-ABR export abr-next-hop-self
	#set logical-systems PE4 protocols bgp group Core-ABR family inet labeled-unicast resolve-vpn
	#set logical-systems PE4 protocols bgp group Core-ABR family inet labeled-unicast aigp
	#set logical-systems PE4 protocols bgp group Core-ABR family inet-vpn any
	#set logical-systems PE4 protocols bgp group Core-ABR local-as 65100
	#delete logical-systems PE4 protocols bgp group Core-ABR local-address 10.100.1.0
	##set  logical-systems PE4 protocols bgp group Core-ABR local-address 10.1.0.4
	#set logical-systems PE4 protocols bgp group Core-ABR neighbor 10.2.0.9 description "RR PE9"
	#delete logical-systems PE4 protocols bgp group Core-ABR neighbor 10.100.1.1 description "RR PE9"




	#set logical-systems PE4 policy-options policy-statement emea-import term EMEA-import from route-filter 10.1.0.0/16 orlonger
	#set logical-systems PE4 policy-options policy-statement emea-import term EMEA-import from community EMEA
	#set logical-systems PE4 policy-options policy-statement emea-import term EMEA-import then reject
	#set logical-systems PE4 policy-options policy-statement emea-import term APNIC-import from route-filter 10.2.0.0/16 orlonger
	#set logical-systems PE4 policy-options policy-statement emea-import term APNIC-import from community APNIC
	#set logical-systems PE4 policy-options policy-statement emea-import term APNIC-import then accept
	#set logical-systems PE4 policy-options policy-statement emea-import term ARIN-import from route-filter 10.3.0.0/16 orlonger
	#set logical-systems PE4 policy-options policy-statement emea-import term ARIN-import from community ARIN
	#set logical-systems PE4 policy-options policy-statement emea-import term ARIN-import then accept
	#set logical-systems PE4 policy-options policy-statement emea-import term community-all from community ALL
	#set logical-systems PE4 policy-options policy-statement emea-import term community-all then accept
	#set logical-systems PE4 policy-options policy-statement emea-import then reject



	set logical-systems PE4 policy-options policy-statement aigp-originate term aigp-originate from route-filter 10.1.0.4/32 exact
	set logical-systems PE4 policy-options policy-statement aigp-originate term aigp-originate then aigp-originate 0
	set logical-systems PE4 policy-options policy-statement aigp-originate term aigp-originate then community add EMEA
	set logical-systems PE4 policy-options policy-statement aigp-originate term aigp-originate then accept
	set logical-systems PE4 policy-options policy-statement aigp-originate term reject-local-area-routes from route-filter 10.1.0.0/16 orlonger
	set logical-systems PE4 policy-options policy-statement aigp-originate term reject-local-area-routes then reject
	set logical-systems PE4 policy-options policy-statement aigp-originate term accept-all then accept
	set logical-systems PE4 policy-options policy-statement aigp-originate then reject




	delete logical-systems PE4 policy-options policy-statement abr-export-label

	#set logical-systems PE4 policy-options policy-statement abr-export-label term aigp-originate from route-filter 10.1.0.4/32 exact
	#set logical-systems PE4 policy-options policy-statement abr-export-label term aigp-originate then community add EMEA
	#set logical-systems PE4 policy-options policy-statement abr-export-label term aigp-originate then aigp-originate 0
	#set logical-systems PE4 policy-options policy-statement abr-export-label term aigp-originate then accept
	#set logical-systems PE4 policy-options policy-statement abr-export-label term EMEA-redist from route-filter 10.1.0.0/16 orlonger
	#set logical-systems PE4 policy-options policy-statement abr-export-label term EMEA-redist then community set EMEA
	#delete logical-systems PE4 policy-options policy-statement abr-export-label term EMEA-redist then aigp-originate distance 10000
	#delete logical-systems PE4 policy-options policy-statement abr-export-label term EMEA-redist then  next-hop self
	#set logical-systems PE4 policy-options policy-statement abr-export-label term EMEA-redist then accept
	#set logical-systems PE4 policy-options policy-statement abr-export-label term APNIC-redist from route-filter 10.2.0.0/16 orlonger
	#set logical-systems PE4 policy-options policy-statement abr-export-label term APNIC-redist then community set APNIC
	#set logical-systems PE4 policy-options policy-statement abr-export-label term APNIC-redist then accept
	#set logical-systems PE4 policy-options policy-statement abr-export-label term ARIN-redist from route-filter 10.3.0.0/16 orlonger
	#set logical-systems PE4 policy-options policy-statement abr-export-label term ARIN-redist then community set ARIN
	#delete logical-systems PE4 policy-options policy-statement abr-export-label term ARIN-redist then aigp-originate distance 10000
	#delete logical-systems PE4 policy-options policy-statement abr-export-label term ARIN-redist then  next-hop self
	#set logical-systems PE4 policy-options policy-statement abr-export-label term ARIN-redist then accept
	#set logical-systems PE4 policy-options policy-statement abr-export-label term community-all from community ALL
	#set logical-systems PE4 policy-options policy-statement abr-export-label term community-all then accept
	#set logical-systems PE4 policy-options policy-statement abr-export-label then reject


	delete logical-systems PE4  policy-options policy-statement abr-next-hop-self 


	set logical-systems PE4 policy-options community EMEA members target:13213:10
	set logical-systems PE4 policy-options community APNIC members target:13213:11
	set logical-systems PE4 policy-options community ARIN members target:13213:12
	set logical-systems PE4 policy-options community ALL members target:13213:*



	=====
	PE5
	=====


	set logical-systems PE5 routing-options autonomous-system 65100
	set logical-systems PE5 routing-options router-id 10.1.0.5

	RR Client Config
	set logical-systems PE5 protocols bgp group Core-RR type internal
	set logical-systems PE5 protocols bgp group Core-RR export aigp-originate
	set logical-systems PE5 protocols bgp group Core-RR local-address 10.1.0.5
	set logical-systems PE5 protocols bgp group Core-RR family inet labeled-unicast resolve-vpn
	set logical-systems PE5 protocols bgp group Core-RR family inet labeled-unicast aigp
	set logical-systems PE5 protocols bgp group Core-RR family inet-vpn any
	set logical-systems PE5 protocols bgp group Core-RR local-as 65100
	set logical-systems PE5 protocols bgp group Core-RR neighbor 10.1.0.1 description "RR PE1"
	set logical-systems PE5 protocols bgp group Core-RR neighbor 10.1.0.2 description "RR PE2"



	set logical-systems PE5 policy-options policy-statement aigp-originate term aigp-originate from route-filter 10.1.0.5/32 exact
	set logical-systems PE5 policy-options policy-statement aigp-originate term aigp-originate then community add EMEA
	set logical-systems PE5 policy-options policy-statement aigp-originate term aigp-originate then aigp-originate 0
	set logical-systems PE5 policy-options policy-statement aigp-originate term aigp-originate then accept
	set logical-systems PE5 policy-options policy-statement aigp-originate term accept-all then reject
	set logical-systems PE5 policy-options policy-statement aigp-originate then reject



	set logical-systems PE5 policy-options community EMEA members target:13213:10
	set logical-systems PE5 policy-options community APNIC members target:13213:11
	set logical-systems PE5 policy-options community ARIN members target:13213:12
	set logical-systems PE5 policy-options community ALL members target:13213:*



	=====
	PE6
	=====

	set logical-systems PE6 routing-options autonomous-system 65100
	set logical-systems PE6 routing-options router-id 10.1.0.6

	RR Client Config
	set logical-systems PE6 protocols bgp group Core-RR type internal
	set logical-systems PE6 protocols bgp group Core-RR export aigp-originate
	set logical-systems PE6 protocols bgp group Core-RR local-address 10.1.0.6
	set logical-systems PE6 protocols bgp group Core-RR family inet labeled-unicast resolve-vpn
	set logical-systems PE6 protocols bgp group Core-RR family inet labeled-unicast aigp
	set logical-systems PE6 protocols bgp group Core-RR family inet-vpn any
	set logical-systems PE6 protocols bgp group Core-RR local-as 65100
	set logical-systems PE6 protocols bgp group Core-RR neighbor 10.1.0.1 description "RR PE1"
	set logical-systems PE6 protocols bgp group Core-RR neighbor 10.1.0.2 description "RR PE2"



	set logical-systems PE6 policy-options policy-statement aigp-originate term aigp-originate from route-filter 10.1.0.6/32 exact
	set logical-systems PE6 policy-options policy-statement aigp-originate term aigp-originate then community add EMEA
	set logical-systems PE6 policy-options policy-statement aigp-originate term aigp-originate then aigp-originate 0
	set logical-systems PE6 policy-options policy-statement aigp-originate term aigp-originate then accept
	set logical-systems PE6 policy-options policy-statement aigp-originate term accept-all then reject
	set logical-systems PE6 policy-options policy-statement aigp-originate then reject





	set logical-systems PE6 policy-options community EMEA members target:13213:10
	set logical-systems PE6 policy-options community APNIC members target:13213:11
	set logical-systems PE6 policy-options community ARIN members target:13213:12
	set logical-systems PE6 policy-options community ALL members target:13213:*





	*******************L3VPN*********************

	PE5:

	set logical-systems PE5 policy-options community thg members target:13213:5387

	set logical-systems PE5 policy-options policy-statement thg-export term thg then community set thg
	set logical-systems PE5 policy-options policy-statement thg-export term thg then accept
	set logical-systems PE5 policy-options policy-statement thg-export then reject

	set logical-systems PE5 policy-options policy-statement thg-import term thg from community thg
	set logical-systems PE5 policy-options policy-statement thg-import term thg then accept
	set logical-systems PE5 policy-options policy-statement thg-import then reject

	set logical-systems PE5 routing-instances thg instance-type vrf
	set logical-systems PE5 routing-instances thg interface lo0.5387
	set logical-systems PE5 routing-instances thg route-distinguisher 13213:5387
	set logical-systems PE5 routing-instances thg vrf-import thg-import
	set logical-systems PE5 routing-instances thg vrf-export thg-export
	set logical-systems PE5 routing-instances thg vrf-table-label
	set logical-systems PE5 routing-instances thg routing-options auto-export

	set logical-systems PE5 interfaces lo0 unit 5387 family inet address 172.1.1.5/32




	------

	PE1:

	set logical-systems PE1 policy-options community thg members target:13213:5387

	set logical-systems PE1 policy-options policy-statement thg-export term thg then community set thg
	set logical-systems PE1 policy-options policy-statement thg-export term thg then accept
	set logical-systems PE1 policy-options policy-statement thg-export then reject

	set logical-systems PE1 policy-options policy-statement thg-import term thg from community thg
	set logical-systems PE1 policy-options policy-statement thg-import term thg then accept
	set logical-systems PE1 policy-options policy-statement thg-import then reject

	set logical-systems PE1 routing-instances thg instance-type vrf
	set logical-systems PE1 routing-instances thg interface lo0.5388
	set logical-systems PE1 routing-instances thg route-distinguisher 13213:5387
	set logical-systems PE1 routing-instances thg vrf-import thg-import
	set logical-systems PE1 routing-instances thg vrf-export thg-export
	set logical-systems PE1 routing-instances thg vrf-table-label
	set logical-systems PE1 routing-instances thg routing-options auto-export

	set logical-systems PE1 interfaces lo0 unit 5388 family inet address 172.1.1.1/32





	------

	PE6:

	set logical-systems PE6 policy-options community thg members target:13213:5387

	set logical-systems PE6 policy-options policy-statement thg-export term thg then community set thg
	set logical-systems PE6 policy-options policy-statement thg-export term thg then accept
	set logical-systems PE6 policy-options policy-statement thg-export then reject

	set logical-systems PE6 policy-options policy-statement thg-import term thg from community thg
	set logical-systems PE6 policy-options policy-statement thg-import term thg then accept
	set logical-systems PE6 policy-options policy-statement thg-import then reject

	set logical-systems PE6 routing-instances thg instance-type vrf
	set logical-systems PE6 routing-instances thg interface lo0.5391
	set logical-systems PE6 routing-instances thg route-distinguisher 13213:5387
	set logical-systems PE6 routing-instances thg vrf-import thg-import
	set logical-systems PE6 routing-instances thg vrf-export thg-export
	set logical-systems PE6 routing-instances thg vrf-table-label
	set logical-systems PE6 routing-instances thg routing-options auto-export

	set logical-systems PE6 interfaces lo0 unit 5391 family inet address 172.1.1.6/32





**********************************************************


L3vpn config:




PE6:

-------
set logical-systems PE6 routing-instances thg protocols bgp group Core-RR type external
set logical-systems PE6 routing-instances thg protocols bgp group Core-RR local-address 10.10.8.0
set logical-systems PE6 routing-instances thg protocols bgp group Core-RR local-as 65100
set logical-systems PE6 routing-instances thg protocols bgp group Core-RR peer-as 10000
set logical-systems PE6 routing-instances thg protocols bgp group Core-RR neighbor 10.10.8.1 description "CE6 - PE6"






set logical-systems PE6 interfaces lt-0/0/10 unit 17 encapsulation vlan
set logical-systems PE6 interfaces lt-0/0/10 unit 17 vlan-id 2
set logical-systems PE6 interfaces lt-0/0/10 unit 17 description "Link to CE6"
set logical-systems PE6 interfaces lt-0/0/10 unit 17 peer-unit 18
set logical-systems PE6 interfaces lt-0/0/10 unit 17 family inet address 10.10.8.0/31

set logical-systems PE6 routing-instances thg interface lt-0/0/10.17


-------------------------

===
CE6
===
CE Router peering with CE6:



set logical-systems CE6 routing-options autonomous-system 10000
set logical-systems CE6 routing-options router-id 10.10.8.1

set logical-systems CE6 interfaces lt-0/0/10 unit 18 encapsulation vlan
set logical-systems CE6 interfaces lt-0/0/10 unit 18 vlan-id 2
set logical-systems CE6 interfaces lt-0/0/10 unit 18 description "Link to PE6"
set logical-systems CE6 interfaces lt-0/0/10 unit 18 peer-unit 17
set logical-systems CE6 interfaces lt-0/0/10 unit 18 family inet address 10.10.8.1/31




set logical-systems CE6 protocols bgp group Core-RR type external
set logical-systems CE6 protocols bgp group Core-RR local-address 10.10.8.1
set logical-systems CE6 protocols bgp group Core-RR local-as 10000
set logical-systems CE6 protocols bgp group Core-RR peer-as 65100
set logical-systems CE6 protocols bgp group Core-RR neighbor 10.10.8.0 description "CE6 - PE6"




set logical-systems CE6 interface lo0 unit 6000 family inet address 20.20.20.20/32





set logical-systems CE6  policy-options policy-statement allow-all from protocol direct

set logical-systems CE6  policy-options policy-statement allow-all then accept


set logical-systems CE6  protocols bgp group Core-RR export allow-all








*******************************************************************************


PE5:









-------
set logical-systems PE5 routing-instances thg protocols bgp group Core-RR type external
set logical-systems PE5 routing-instances thg protocols bgp group Core-RR local-address 10.10.9.0
set logical-systems PE5 routing-instances thg protocols bgp group Core-RR local-as 65100
set logical-systems PE5 routing-instances thg protocols bgp group Core-RR peer-as 10005
set logical-systems PE5 routing-instances thg protocols bgp group Core-RR neighbor 10.10.9.1 description "CE6 - PE5"






set logical-systems PE5 interfaces lt-0/0/10 unit 19 encapsulation vlan
set logical-systems PE5 interfaces lt-0/0/10 unit 19 vlan-id 2
set logical-systems PE5 interfaces lt-0/0/10 unit 19 description "Link to CE6"
set logical-systems PE5 interfaces lt-0/0/10 unit 19 peer-unit 20
set logical-systems PE5 interfaces lt-0/0/10 unit 19 family inet address 10.10.9.0/31

set logical-systems PE5 routing-instances thg interface lt-0/0/10.19


-------------------------

===
CE5
===
CE Router peering with CE5:



set logical-systems CE5 routing-options autonomous-system 10005
set logical-systems CE5 routing-options router-id 10.10.9.1

set logical-systems CE5 interfaces lt-0/0/10 unit 20 encapsulation vlan
set logical-systems CE5 interfaces lt-0/0/10 unit 20 vlan-id 2
set logical-systems CE5 interfaces lt-0/0/10 unit 20 description "Link to PE6"
set logical-systems CE5 interfaces lt-0/0/10 unit 20 peer-unit 19
set logical-systems CE5 interfaces lt-0/0/10 unit 20 family inet address 10.10.9.1/31




set logical-systems CE5 protocols bgp group Core-RR type external
set logical-systems CE5 protocols bgp group Core-RR local-address 10.10.9.1
set logical-systems CE5 protocols bgp group Core-RR local-as 10005
set logical-systems CE5 protocols bgp group Core-RR peer-as 65100
set logical-systems CE5 protocols bgp group Core-RR neighbor 10.10.9.0 description "CE5 - PE6"




set logical-systems CE5 interface lo0 unit 7000 family inet address 30.30.30.30/32





set logical-systems CE5  policy-options policy-statement allow-all from protocol direct

set logical-systems CE5  policy-options policy-statement allow-all then accept


set logical-systems CE5  protocols bgp group Core-RR export allow-all
